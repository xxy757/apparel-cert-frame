# å‰åç«¯è”è°ƒæŠ¥å‘Š

## ğŸ“‹ æ¥å£æ–‡æ¡£åˆ†æï¼ˆåŸºäºåç«¯ä»£ç ï¼‰

### 1. ç™»å½•æ¥å£

#### åç«¯å®é™…æ¥å£ï¼š
- **ä¸ªäººç”¨æˆ·ç™»å½•**: `POST /api/auth/login/personal`
- **ä¼ä¸šç”¨æˆ·ç™»å½•**: `POST /api/auth/login/enterprise`

#### è¯·æ±‚å‚æ•°ï¼š
```json
{
  "username": "string",
  "password": "string"
}
```

#### å“åº”æ ¼å¼ï¼š
```json
{
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": {
    "token": "jwt_token_string",
    "id": 123,
    "userId": 123,
    ...å…¶ä»–ç”¨æˆ·ä¿¡æ¯
  }
}
```

**å…³é”®å‘ç°**ï¼š
- âŒ å‰ç«¯åŸæœ¬ä½¿ç”¨ç»Ÿä¸€çš„ `/api/auth/login` æ¥å£ï¼Œä¼ é€’ `userType` å‚æ•°
- âœ… åç«¯å®é™…åˆ†ä¸ºä¸¤ä¸ªç‹¬ç«‹æ¥å£ï¼š`/login/personal` å’Œ `/login/enterprise`
- âœ… ä¸éœ€è¦ä¼ é€’ `userType` å‚æ•°

---

### 2. æ³¨å†Œæ¥å£

#### åç«¯å®é™…æ¥å£ï¼š
- **ä¸ªäººç”¨æˆ·æ³¨å†Œ**: `POST /api/auth/register/personal`
- **ä¼ä¸šç”¨æˆ·æ³¨å†Œ**: `POST /api/auth/register/enterprise`

#### ä¸ªäººç”¨æˆ·è¯·æ±‚å‚æ•°ï¼ˆUserPersonalï¼‰ï¼š
```json
{
  "username": "string",
  "password": "string",
  "name": "string",
  "phone": "string",
  "email": "string",
  "careerDirection": "string"  // å¯é€‰
}
```

#### ä¼ä¸šç”¨æˆ·è¯·æ±‚å‚æ•°ï¼ˆUserEnterpriseï¼‰ï¼š
```json
{
  "username": "string",
  "password": "string",
  "companyName": "string",
  "companyType": "string",      // å¯é€‰
  "contactPerson": "string",
  "contactPhone": "string",
  "email": "string",
  "address": "string"           // å¯é€‰
}
```

#### å“åº”æ ¼å¼ï¼š
```json
{
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": {
    "id": 123,
    ...æ³¨å†Œç”¨æˆ·ä¿¡æ¯
  }
}
```

**å…³é”®å‘ç°**ï¼š
- âŒ å‰ç«¯åŸæœ¬ä½¿ç”¨ç»Ÿä¸€çš„ `/api/auth/register` æ¥å£
- âœ… åç«¯å®é™…åˆ†ä¸ºä¸¤ä¸ªç‹¬ç«‹æ¥å£ï¼š`/register/personal` å’Œ `/register/enterprise`
- âœ… ä¸éœ€è¦ä¼ é€’ `userType` å‚æ•°

---

## âœ… å‰ç«¯ä»£ç ä¿®æ”¹å†…å®¹

### 1. Login.vue ä¿®æ”¹

**ä¿®æ”¹å‰**ï¼š
```javascript
const response = await request.post('/auth/login', {
  username: form.username,
  password: form.password,
  userType: type === 'personal' ? 1 : 2
})
```

**ä¿®æ”¹å**ï¼š
```javascript
const loginUrl = type === 'personal' ? '/auth/login/personal' : '/auth/login/enterprise'
const response = await request.post(loginUrl, {
  username: form.username,
  password: form.password
})
```

**æ”¹è¿›ç‚¹**ï¼š
- âœ… æ ¹æ®ç”¨æˆ·ç±»å‹åŠ¨æ€é€‰æ‹©æ­£ç¡®çš„APIè·¯å¾„
- âœ… ç§»é™¤äº†ä¸å¿…è¦çš„ `userType` å‚æ•°
- âœ… å…¼å®¹å¤„ç† `userId` å’Œ `id` å­—æ®µ

---

### 2. Register.vue ä¿®æ”¹

**ä¿®æ”¹å‰**ï¼š
```javascript
const registerData = {
  username: form.username,
  password: form.password,
  userType: type === 'personal' ? 1 : 2,
  ...
}
const response = await request.post('/auth/register', registerData)
```

**ä¿®æ”¹å**ï¼š
```javascript
let registerUrl = type === 'personal' ? '/auth/register/personal' : '/auth/register/enterprise'
const registerData = {
  username: form.username,
  password: form.password,
  // æ ¹æ®ç±»å‹æ·»åŠ ç‰¹å®šå­—æ®µï¼Œä¸åŒ…å« userType
}
const response = await request.post(registerUrl, registerData)
```

**æ”¹è¿›ç‚¹**ï¼š
- âœ… æ ¹æ®ç”¨æˆ·ç±»å‹åŠ¨æ€é€‰æ‹©æ­£ç¡®çš„APIè·¯å¾„
- âœ… ç§»é™¤äº†ä¸å¿…è¦çš„ `userType` å‚æ•°
- âœ… ä¸ºå¯é€‰å­—æ®µæä¾›ç©ºå­—ç¬¦ä¸²é»˜è®¤å€¼ï¼ˆ`companyType`, `address`ï¼‰

---

## ğŸ§ª æµ‹è¯•è®¡åˆ’

### æµ‹è¯•ç¯å¢ƒå‡†å¤‡

1. **åç«¯æœåŠ¡**ï¼š
   - å¯åŠ¨å‘½ä»¤ï¼š`cd backend && mvn spring-boot:run`
   - ç«¯å£ï¼š8080
   - Swagger/Knife4jæ–‡æ¡£ï¼š`http://localhost:8080/doc.html`

2. **å‰ç«¯æœåŠ¡**ï¼š
   - å¯åŠ¨å‘½ä»¤ï¼š`cd frontend && npm run dev`
   - ç«¯å£ï¼š3000
   - è®¿é—®åœ°å€ï¼š`http://localhost:3000`

3. **æ•°æ®åº“**ï¼š
   - ç¡®ä¿MySQLæœåŠ¡è¿è¡Œ
   - æ•°æ®åº“ï¼šapparel_cert
   - æ‰§è¡Œåˆå§‹åŒ–è„šæœ¬ï¼š`database/create_tables.sql`

---

### æµ‹è¯•ç”¨ä¾‹

#### 1. ä¸ªäººç”¨æˆ·æ³¨å†Œæµ‹è¯•

**æµ‹è¯•æ•°æ®**ï¼š
```
ç”¨æˆ·åï¼štestuser001
å¯†ç ï¼š123456
å§“åï¼šå¼ ä¸‰
æ‰‹æœºå·ï¼š13800138000
é‚®ç®±ï¼šzhangsan@test.com
èŒä¸šæ–¹å‘ï¼šæœè£…è®¾è®¡å¸ˆ
```

**éªŒè¯ç‚¹**ï¼š
- [ ] ç”¨æˆ·åé•¿åº¦éªŒè¯ï¼ˆ6-20å­—ç¬¦ï¼‰
- [ ] æ‰‹æœºå·æ ¼å¼éªŒè¯
- [ ] é‚®ç®±æ ¼å¼éªŒè¯
- [ ] å¯†ç ç¡®è®¤éªŒè¯
- [ ] æ³¨å†ŒæˆåŠŸæç¤º
- [ ] è‡ªåŠ¨è·³è½¬åˆ°ç™»å½•é¡µ

**é¢„æœŸç»“æœ**ï¼š
- æ•°æ®åº“ `user_personal` è¡¨æ–°å¢ä¸€æ¡è®°å½•
- å¯†ç åº”è¯¥æ˜¯BCryptåŠ å¯†åçš„

---

#### 2. ä¼ä¸šç”¨æˆ·æ³¨å†Œæµ‹è¯•

**æµ‹è¯•æ•°æ®**ï¼š
```
ç”¨æˆ·åï¼šcompany001
å¯†ç ï¼š123456
ä¼ä¸šåç§°ï¼šæŸæŸæœè£…æœ‰é™å…¬å¸
ä¼ä¸šç±»å‹ï¼šåˆ¶é€ ä¸š
è”ç³»äººï¼šæå››
è”ç³»ç”µè¯ï¼š13900139000
é‚®ç®±ï¼šcompany@test.com
ä¼ä¸šåœ°å€ï¼šåŒ—äº¬å¸‚æœé˜³åŒº
```

**éªŒè¯ç‚¹**ï¼š
- [ ] ç”¨æˆ·åé•¿åº¦éªŒè¯
- [ ] æ‰‹æœºå·æ ¼å¼éªŒè¯
- [ ] é‚®ç®±æ ¼å¼éªŒè¯
- [ ] æ³¨å†ŒæˆåŠŸæç¤ºï¼ˆæ˜¾ç¤ºå¾…å®¡æ ¸ï¼‰
- [ ] è‡ªåŠ¨è·³è½¬åˆ°ç™»å½•é¡µ

**é¢„æœŸç»“æœ**ï¼š
- æ•°æ®åº“ `user_enterprise` è¡¨æ–°å¢ä¸€æ¡è®°å½•
- `auth_status` å­—æ®µåº”è¯¥æ˜¯å¾…å®¡æ ¸çŠ¶æ€

---

#### 3. ä¸ªäººç”¨æˆ·ç™»å½•æµ‹è¯•

**æµ‹è¯•æ•°æ®**ï¼šä½¿ç”¨ä¸Šé¢æ³¨å†Œçš„ testuser001

**éªŒè¯ç‚¹**ï¼š
- [ ] ç”¨æˆ·åå¯†ç éªŒè¯
- [ ] ç™»å½•æˆåŠŸæç¤º
- [ ] Tokenä¿å­˜åˆ°localStorage
- [ ] userTypeä¿å­˜ä¸º 'personal'
- [ ] è‡ªåŠ¨è·³è½¬åˆ° `/personal/resume`

**é¢„æœŸç»“æœ**ï¼š
- localStorageä¸­æœ‰ `token`, `userType`, `userId`, `username`
- æˆåŠŸè¿›å…¥ä¸ªäººç”¨æˆ·ä¸­å¿ƒé¡µé¢

---

#### 4. ä¼ä¸šç”¨æˆ·ç™»å½•æµ‹è¯•

**æµ‹è¯•æ•°æ®**ï¼šä½¿ç”¨ä¸Šé¢æ³¨å†Œçš„ company001

**éªŒè¯ç‚¹**ï¼š
- [ ] ç”¨æˆ·åå¯†ç éªŒè¯
- [ ] ç™»å½•æˆåŠŸæç¤º
- [ ] Tokenä¿å­˜åˆ°localStorage
- [ ] userTypeä¿å­˜ä¸º 'enterprise'
- [ ] è‡ªåŠ¨è·³è½¬åˆ° `/enterprise/job`

**é¢„æœŸç»“æœ**ï¼š
- localStorageä¸­æœ‰æ­£ç¡®çš„ç”¨æˆ·ä¿¡æ¯
- æˆåŠŸè¿›å…¥ä¼ä¸šç”¨æˆ·ä¸­å¿ƒé¡µé¢

---

## ğŸ› å¯èƒ½é‡åˆ°çš„é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ

### é—®é¢˜1ï¼šCORSè·¨åŸŸé”™è¯¯

**ç—‡çŠ¶**ï¼š
```
Access to XMLHttpRequest at 'http://localhost:8080/api/...' from origin 'http://localhost:3000' has been blocked by CORS policy
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
æ£€æŸ¥åç«¯ `CorsConfig.java` é…ç½®ï¼Œç¡®ä¿å…è®¸ `http://localhost:3000` è·¨åŸŸè®¿é—®ã€‚

---

### é—®é¢˜2ï¼šå¯†ç åŠ å¯†ä¸åŒ¹é…

**ç—‡çŠ¶**ï¼šç™»å½•æ—¶æç¤º"ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯"ï¼Œä½†æ•°æ®æ˜¯æ­£ç¡®çš„

**è§£å†³æ–¹æ¡ˆ**ï¼š
æ£€æŸ¥åç«¯ `AuthServiceImpl.java` ä¸­çš„å¯†ç åŠ å¯†å’ŒéªŒè¯é€»è¾‘ï¼Œç¡®ä¿ä½¿ç”¨BCryptã€‚

---

### é—®é¢˜3ï¼šTokenæ— æ³•è‡ªåŠ¨æ·»åŠ åˆ°è¯·æ±‚å¤´

**ç—‡çŠ¶**ï¼šè®¿é—®éœ€è¦è®¤è¯çš„æ¥å£æ—¶è¿”å›401

**è§£å†³æ–¹æ¡ˆ**ï¼š
æ£€æŸ¥ `request.js` æ‹¦æˆªå™¨æ˜¯å¦æ­£ç¡®æ·»åŠ  `Authorization` å¤´ï¼Œæ ¼å¼åº”è¯¥æ˜¯ `Bearer ${token}`ã€‚

---

## ğŸ“ åç»­å·¥ä½œ

1. **æµ‹è¯•ç®€å†ç®¡ç†åŠŸèƒ½**ï¼š
   - [ ] æŸ¥çœ‹ `ResumeController.java` çš„æ¥å£å®šä¹‰
   - [ ] æµ‹è¯•ç®€å†çš„å¢åˆ æ”¹æŸ¥
   - [ ] æµ‹è¯•PDFå¯¼å‡ºåŠŸèƒ½

2. **å®Œå–„é”™è¯¯å¤„ç†**ï¼š
   - [ ] ä¼˜åŒ–é”™è¯¯æç¤ºæ–‡æ¡ˆ
   - [ ] æ·»åŠ ç½‘ç»œè¶…æ—¶å¤„ç†
   - [ ] æ·»åŠ è¡¨å•é˜²é‡å¤æäº¤

3. **å®‰å…¨ä¼˜åŒ–**ï¼š
   - [ ] å®ç°Tokenåˆ·æ–°æœºåˆ¶
   - [ ] æ·»åŠ ç™»å½•éªŒè¯ç 
   - [ ] å®ç°å¯†ç å¼ºåº¦æ ¡éªŒ

---

## âœ… æ„å»ºç»“æœ

å‰ç«¯ä»£ç å·²æˆåŠŸæ„å»ºï¼Œæ— è¯­æ³•é”™è¯¯ï¼š
```
âœ“ built in 11.85s
```

æ‰€æœ‰ä¿®æ”¹å·²å®Œæˆï¼Œå‡†å¤‡è¿›è¡Œå®é™…è”è°ƒæµ‹è¯•ï¼


