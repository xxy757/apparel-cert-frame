import{_ as O,z as ee,r as d,P as te,o as ae,e as i,f as r,g as m,h as a,F as D,j as N,i as s,w as n,t as I,H as V,d as le,L as se,W as oe,X as ne,q as ie,v as ce,x as o,S as ue,n as p,C as H,Y as re,E as j,R as de}from"./index-a65af770.js";import{r as S}from"./request-32baecc7.js";const pe={class:"applications-container"},me={class:"stats-cards"},_e={class:"stat-info"},ve={class:"stat-value"},ye={class:"stat-label"},ge={class:"filter-bar"},fe={class:"applications-list"},Ee=["onClick"],be={class:"company-logo"},Ie=["src"],he={class:"application-info"},Te={class:"job-title"},we={class:"company-name"},ke={class:"job-meta"},Ce={class:"salary"},De={class:"location"},Ne={class:"apply-time"},Ve={class:"application-status"},je={class:"status-time"},Le={class:"application-actions"},xe={class:"pagination-wrapper"},ze={key:0,class:"detail-content"},Pe={class:"detail-header"},Re=["src"],We={class:"detail-info"},G="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjY0IiBoZWlnaHQ9IjY0IiBmaWxsPSIjZjBmMGYwIi8+PHRleHQgeD0iMzIiIHk9IjM4IiBmb250LXNpemU9IjI0IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmaWxsPSIjY2NjIj7kvIE8L3RleHQ+PC9zdmc+",Be={__name:"Applications",setup(Ae){const v=ee([{key:"total",label:"总申请",value:0,icon:le,color:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},{key:"viewed",label:"已查看",value:0,icon:se,color:"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)"},{key:"interview",label:"面试中",value:0,icon:oe,color:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)"},{key:"accepted",label:"已通过",value:0,icon:ne,color:"linear-gradient(135deg, #11998e 0%, #38ef7d 100%)"}]),g=d(""),f=d(""),L=d([]),h=d(1),T=d(10),w=d(0),y=d([]),k=d(!1),u=d(null),x=te(()=>{let l=y.value;if(g.value){const t=g.value.toLowerCase();l=l.filter(c=>c.jobTitle.toLowerCase().includes(t)||c.companyName.toLowerCase().includes(t))}return f.value&&(l=l.filter(t=>t.status===f.value)),l}),z=l=>({PENDING:"info",VIEWED:"warning",INTERVIEW:"primary",ACCEPTED:"success",REJECTED:"danger"})[l]||"info",P=l=>({PENDING:"待处理",VIEWED:"已查看",INTERVIEW:"面试中",ACCEPTED:"已通过",REJECTED:"已拒绝"})[l]||l,R=l=>l?new Date(l).toLocaleDateString("zh-CN",{year:"numeric",month:"long",day:"numeric"}):"",M=l=>{u.value=l,k.value=!0},K=l=>{j.info("面试详情功能开发中")},U=l=>{de.confirm("确定要撤回该申请吗？撤回后无法恢复","撤回确认",{confirmButtonText:"确定撤回",cancelButtonText:"取消",type:"warning"}).then(async()=>{try{await S.post(`/api/application/${l.id}/withdraw`),j.success("申请已撤回"),W()}catch{const c=y.value.findIndex(C=>C.id===l.id);c>-1&&y.value.splice(c,1),j.success("申请已撤回")}}).catch(()=>{})},W=async()=>{var l,t;try{const c=await S.get("/api/application/my-list",{params:{page:h.value,size:T.value}});y.value=((l=c.data)==null?void 0:l.list)||[],w.value=((t=c.data)==null?void 0:t.total)||0}catch{y.value=[{id:1,jobTitle:"高级服装设计师",companyName:"上海时尚服饰有限公司",companyLogo:null,salary:"15K-25K",location:"上海市",applyTime:"2024-01-15T10:30:00",status:"INTERVIEW",statusTime:"2024-01-18",timeline:[{time:"2024-01-15 10:30",content:"成功投递简历",type:"primary"},{time:"2024-01-16 14:20",content:"HR已查看您的简历",type:"success"},{time:"2024-01-18 09:00",content:"收到面试邀请",type:"warning"}]},{id:2,jobTitle:"服装版型师",companyName:"杭州丝绸集团",companyLogo:null,salary:"12K-18K",location:"杭州市",applyTime:"2024-01-10T14:00:00",status:"VIEWED",statusTime:"2024-01-12",timeline:[{time:"2024-01-10 14:00",content:"成功投递简历",type:"primary"},{time:"2024-01-12 11:30",content:"HR已查看您的简历",type:"success"}]},{id:3,jobTitle:"时装买手",companyName:"北京潮流服饰",companyLogo:null,salary:"10K-15K",location:"北京市",applyTime:"2024-01-08T09:15:00",status:"ACCEPTED",statusTime:"2024-01-20",timeline:[{time:"2024-01-08 09:15",content:"成功投递简历",type:"primary"},{time:"2024-01-09 10:00",content:"HR已查看您的简历",type:"success"},{time:"2024-01-12 14:00",content:"通过初筛，进入面试",type:"warning"},{time:"2024-01-20 16:00",content:"恭喜！您已通过面试",type:"success"}]}],w.value=3,v[0].value=3,v[1].value=1,v[2].value=1,v[3].value=1}};return ae(()=>{W()}),(l,t)=>{const c=i("el-icon"),C=i("el-input"),_=i("el-option"),Y=i("el-select"),Z=i("el-date-picker"),J=i("el-empty"),B=i("el-tag"),A=i("el-button"),Q=i("el-pagination"),E=i("el-descriptions-item"),F=i("el-descriptions"),$=i("el-timeline-item"),X=i("el-timeline"),q=i("el-drawer");return r(),m("div",pe,[t[9]||(t[9]=a("div",{class:"page-header"},[a("h1",null,"我的求职申请"),a("p",{class:"subtitle"},"追踪您的求职进度，管理面试安排")],-1)),a("div",me,[(r(!0),m(D,null,N(v,e=>(r(),m("div",{class:"stat-card",key:e.key},[a("div",{class:"stat-icon",style:ie({background:e.color})},[s(c,null,{default:n(()=>[(r(),I(ce(e.icon)))]),_:2},1024)],4),a("div",_e,[a("span",ve,o(e.value),1),a("span",ye,o(e.label),1)])]))),128))]),a("div",ge,[s(C,{modelValue:g.value,"onUpdate:modelValue":t[0]||(t[0]=e=>g.value=e),placeholder:"搜索职位名称或公司名","prefix-icon":"Search",clearable:"",class:"search-input"},null,8,["modelValue"]),s(Y,{modelValue:f.value,"onUpdate:modelValue":t[1]||(t[1]=e=>f.value=e),placeholder:"申请状态",clearable:"",class:"status-select"},{default:n(()=>[s(_,{label:"全部状态",value:""}),s(_,{label:"待处理",value:"PENDING"}),s(_,{label:"已查看",value:"VIEWED"}),s(_,{label:"面试中",value:"INTERVIEW"}),s(_,{label:"已通过",value:"ACCEPTED"}),s(_,{label:"已拒绝",value:"REJECTED"})]),_:1},8,["modelValue"]),s(Z,{modelValue:L.value,"onUpdate:modelValue":t[2]||(t[2]=e=>L.value=e),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",class:"date-picker"},null,8,["modelValue"])]),a("div",fe,[x.value.length===0?(r(),I(J,{key:0,description:"暂无求职申请记录"})):V("",!0),(r(!0),m(D,null,N(x.value,e=>(r(),m("div",{class:"application-card",key:e.id,onClick:b=>M(e)},[a("div",be,[a("img",{src:e.companyLogo||G,alt:"公司Logo"},null,8,Ie)]),a("div",he,[a("h3",Te,o(e.jobTitle),1),a("p",we,[s(c,null,{default:n(()=>[s(ue(re))]),_:1}),p(" "+o(e.companyName),1)]),a("div",ke,[a("span",Ce,o(e.salary),1),a("span",De,o(e.location),1),a("span",Ne,"投递于 "+o(R(e.applyTime)),1)])]),a("div",Ve,[s(B,{type:z(e.status),size:"large"},{default:n(()=>[p(o(P(e.status)),1)]),_:2},1032,["type"]),a("p",je,o(e.statusTime),1)]),a("div",Le,[e.status==="INTERVIEW"?(r(),I(A,{key:0,type:"primary",size:"small",onClick:H(b=>K(),["stop"])},{default:n(()=>[...t[6]||(t[6]=[p(" 查看面试 ",-1)])]),_:1},8,["onClick"])):V("",!0),s(A,{type:"info",size:"small",plain:"",onClick:H(b=>U(e),["stop"]),disabled:["ACCEPTED","REJECTED"].includes(e.status)},{default:n(()=>[...t[7]||(t[7]=[p(" 撤回申请 ",-1)])]),_:1},8,["onClick","disabled"])])],8,Ee))),128))]),a("div",xe,[s(Q,{"current-page":h.value,"onUpdate:currentPage":t[3]||(t[3]=e=>h.value=e),"page-size":T.value,"onUpdate:pageSize":t[4]||(t[4]=e=>T.value=e),total:w.value,"page-sizes":[10,20,50],layout:"total, sizes, prev, pager, next, jumper",background:""},null,8,["current-page","page-size","total"])]),s(q,{modelValue:k.value,"onUpdate:modelValue":t[5]||(t[5]=e=>k.value=e),title:"申请详情",size:"500px"},{default:n(()=>[u.value?(r(),m("div",ze,[a("div",Pe,[a("img",{src:u.value.companyLogo||G,class:"detail-logo"},null,8,Re),a("div",We,[a("h2",null,o(u.value.jobTitle),1),a("p",null,o(u.value.companyName),1)])]),s(F,{column:1,border:"",class:"detail-descriptions"},{default:n(()=>[s(E,{label:"薪资待遇"},{default:n(()=>[p(o(u.value.salary),1)]),_:1}),s(E,{label:"工作地点"},{default:n(()=>[p(o(u.value.location),1)]),_:1}),s(E,{label:"投递时间"},{default:n(()=>[p(o(R(u.value.applyTime)),1)]),_:1}),s(E,{label:"当前状态"},{default:n(()=>[s(B,{type:z(u.value.status)},{default:n(()=>[p(o(P(u.value.status)),1)]),_:1},8,["type"])]),_:1})]),_:1}),t[8]||(t[8]=a("h3",{class:"timeline-title"},"申请进度",-1)),s(X,null,{default:n(()=>[(r(!0),m(D,null,N(u.value.timeline,(e,b)=>(r(),I($,{key:b,type:e.type,timestamp:e.time,placement:"top"},{default:n(()=>[p(o(e.content),1)]),_:2},1032,["type","timestamp"]))),128))]),_:1})])):V("",!0)]),_:1},8,["modelValue"])])}}},Ge=O(Be,[["__scopeId","data-v-348d7184"]]);export{Ge as default};
