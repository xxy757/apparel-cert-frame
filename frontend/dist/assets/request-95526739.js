import{aC as n,y as o}from"./index-94722956.js";const a=n.create({baseURL:"/api",timeout:15e3,headers:{"Content-Type":"application/json"}});a.interceptors.request.use(e=>{const r=localStorage.getItem("token");return r&&(e.headers.Authorization=`Bearer ${r}`),e},e=>(console.error("请求错误:",e),Promise.reject(e)));a.interceptors.response.use(e=>{const r=e.data;return r.code&&r.code!==200?(o.error(r.message||"请求失败"),r.code===401&&(localStorage.removeItem("token"),localStorage.removeItem("userType"),window.location.pathname.includes("/login")||(window.location.href="/login")),Promise.reject(new Error(r.message||"请求失败"))):r},e=>{if(console.error("响应错误:",e),e.response){const{status:r,data:s}=e.response,t=(s==null?void 0:s.message)||"请求失败";switch(r){case 304:console.warn("收到304响应，可能是缓存问题");break;case 400:o.error(t);break;case 401:o.error(t||"认证失败"),localStorage.removeItem("token"),localStorage.removeItem("userType"),window.location.pathname.includes("/login")||(window.location.href="/login");break;case 403:o.error("没有权限访问");break;case 404:o.error("请求的资源不存在");break;case 500:o.error("服务器内部错误");break;default:o.error(t)}}else e.request?o.error("网络连接失败，请检查网络"):o.error("请求配置错误");return Promise.reject(e)});export{a as r};
