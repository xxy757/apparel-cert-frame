import{_ as T,y as N,r as V,z as x,e as p,f as C,g as D,h as i,i as o,w as a,E as f,C as F,n as v}from"./index-a65af770.js";import{r as k}from"./request-32baecc7.js";const E={name:"Register",setup(){const R=N(),e=V(!1),w=V("personal"),l=x({username:"",password:"",confirmPassword:"",name:"",phone:"",email:"",careerDirection:""}),b=x({username:"",password:"",confirmPassword:"",companyName:"",companyType:"",contactPerson:"",contactPhone:"",email:"",address:""}),c=V(null),s=V(null),n=(m,d,r)=>{const _=w.value==="personal"?l:b;d!==_.password?r(new Error("两次输入密码不一致")):r()};return{activeTab:w,loading:e,personalForm:l,enterpriseForm:b,personalFormRef:c,enterpriseFormRef:s,personalRules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:6,max:20,message:"用户名长度在 6 到 20 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度不能少于 6 个字符",trigger:"blur"}],confirmPassword:[{required:!0,message:"请确认密码",trigger:"blur"},{validator:n,trigger:"blur"}],name:[{required:!0,message:"请输入真实姓名",trigger:"blur"}],phone:[{required:!0,message:"请输入手机号",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:"blur"}],careerDirection:[{required:!0,message:"请选择职业方向",trigger:"change"}]},enterpriseRules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:6,max:20,message:"用户名长度在 6 到 20 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度不能少于 6 个字符",trigger:"blur"}],confirmPassword:[{required:!0,message:"请确认密码",trigger:"blur"},{validator:n,trigger:"blur"}],companyName:[{required:!0,message:"请输入企业名称",trigger:"blur"}],contactPerson:[{required:!0,message:"请输入联系人姓名",trigger:"blur"}],contactPhone:[{required:!0,message:"请输入联系电话",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:"blur"}]},validateConfirmPassword:n,register:m=>{const d=m==="personal"?c:s,r=m==="personal"?l:b;if(!d.value){f.error("表单未加载，请刷新页面");return}d.value.validate(async _=>{if(!_)return f.error("请检查表单信息是否完整正确"),!1;e.value=!0;try{const t={username:r.username,password:r.password};let P="";m==="personal"?(P="/auth/register/personal",t.name=r.name,t.phone=r.phone,t.email=r.email,t.careerDirection=r.careerDirection):(P="/auth/register/enterprise",t.companyName=r.companyName,t.companyType=r.companyType||"",t.contactPerson=r.contactPerson,t.contactPhone=r.contactPhone,t.email=r.email,t.address=r.address||"");const U=await k.post(P,t);U.code===200||U.data?(f.success(m==="personal"?"个人注册成功，请登录":"企业注册成功，待审核后可登录"),d.value.resetFields(),setTimeout(()=>{R.push("/login")},1500)):f.error(U.message||"注册失败，请重试")}catch(t){console.error("注册失败:",t),f.error(t.message||"注册失败，请检查网络或联系管理员")}finally{e.value=!1}})},resetForm:m=>{const d=m==="personalForm"?c:s;d.value&&d.value.resetFields()}}}},B={class:"register-container"},M={class:"register-box"},z={class:"register-tabs"},I={class:"register-actions"},j={class:"register-actions"};function A(R,e,w,l,b,c){const s=p("el-input"),n=p("el-form-item"),u=p("el-option"),q=p("el-select"),g=p("el-button"),y=p("el-form"),m=p("el-tab-pane"),d=p("el-tabs");return C(),D("div",B,[i("div",M,[e[27]||(e[27]=i("h2",null,"服装行业人才技能认证与招聘服务平台",-1)),i("div",z,[o(d,{modelValue:l.activeTab,"onUpdate:modelValue":e[20]||(e[20]=r=>l.activeTab=r),type:"card"},{default:a(()=>[o(m,{label:"个人注册",name:"personal"},{default:a(()=>[o(y,{ref:"personalFormRef",model:l.personalForm,rules:l.personalRules,"label-width":"100px"},{default:a(()=>[o(n,{label:"用户名",prop:"username"},{default:a(()=>[o(s,{modelValue:l.personalForm.username,"onUpdate:modelValue":e[0]||(e[0]=r=>l.personalForm.username=r),placeholder:"请输入用户名"},null,8,["modelValue"])]),_:1}),o(n,{label:"密码",prop:"password"},{default:a(()=>[o(s,{modelValue:l.personalForm.password,"onUpdate:modelValue":e[1]||(e[1]=r=>l.personalForm.password=r),type:"password",placeholder:"请输入密码"},null,8,["modelValue"])]),_:1}),o(n,{label:"确认密码",prop:"confirmPassword"},{default:a(()=>[o(s,{modelValue:l.personalForm.confirmPassword,"onUpdate:modelValue":e[2]||(e[2]=r=>l.personalForm.confirmPassword=r),type:"password",placeholder:"请确认密码"},null,8,["modelValue"])]),_:1}),o(n,{label:"姓名",prop:"name"},{default:a(()=>[o(s,{modelValue:l.personalForm.name,"onUpdate:modelValue":e[3]||(e[3]=r=>l.personalForm.name=r),placeholder:"请输入真实姓名"},null,8,["modelValue"])]),_:1}),o(n,{label:"手机号",prop:"phone"},{default:a(()=>[o(s,{modelValue:l.personalForm.phone,"onUpdate:modelValue":e[4]||(e[4]=r=>l.personalForm.phone=r),placeholder:"请输入手机号"},null,8,["modelValue"])]),_:1}),o(n,{label:"邮箱",prop:"email"},{default:a(()=>[o(s,{modelValue:l.personalForm.email,"onUpdate:modelValue":e[5]||(e[5]=r=>l.personalForm.email=r),placeholder:"请输入邮箱"},null,8,["modelValue"])]),_:1}),o(n,{label:"职业方向",prop:"careerDirection"},{default:a(()=>[o(q,{modelValue:l.personalForm.careerDirection,"onUpdate:modelValue":e[6]||(e[6]=r=>l.personalForm.careerDirection=r),placeholder:"请选择职业方向"},{default:a(()=>[o(u,{label:"设计师",value:"设计师"}),o(u,{label:"打版师",value:"打版师"}),o(u,{label:"质检员",value:"质检员"}),o(u,{label:"导购",value:"导购"}),o(u,{label:"其他",value:"其他"})]),_:1},8,["modelValue"])]),_:1}),o(n,null,{default:a(()=>[i("div",I,[o(g,{type:"primary",onClick:e[7]||(e[7]=F(r=>l.register("personal"),["prevent"])),loading:l.loading},{default:a(()=>[...e[21]||(e[21]=[v("注册",-1)])]),_:1},8,["loading"]),o(g,{onClick:e[8]||(e[8]=F(r=>l.resetForm("personalForm"),["prevent"]))},{default:a(()=>[...e[22]||(e[22]=[v("重置",-1)])]),_:1})])]),_:1}),e[23]||(e[23]=i("div",{class:"register-footer"},[i("a",{href:"/login"},"已有账号？立即登录")],-1))]),_:1},8,["model","rules"])]),_:1}),o(m,{label:"企业注册",name:"enterprise"},{default:a(()=>[o(y,{ref:"enterpriseFormRef",model:l.enterpriseForm,rules:l.enterpriseRules,"label-width":"100px"},{default:a(()=>[o(n,{label:"用户名",prop:"username"},{default:a(()=>[o(s,{modelValue:l.enterpriseForm.username,"onUpdate:modelValue":e[9]||(e[9]=r=>l.enterpriseForm.username=r),placeholder:"请输入用户名"},null,8,["modelValue"])]),_:1}),o(n,{label:"密码",prop:"password"},{default:a(()=>[o(s,{modelValue:l.enterpriseForm.password,"onUpdate:modelValue":e[10]||(e[10]=r=>l.enterpriseForm.password=r),type:"password",placeholder:"请输入密码"},null,8,["modelValue"])]),_:1}),o(n,{label:"确认密码",prop:"confirmPassword"},{default:a(()=>[o(s,{modelValue:l.enterpriseForm.confirmPassword,"onUpdate:modelValue":e[11]||(e[11]=r=>l.enterpriseForm.confirmPassword=r),type:"password",placeholder:"请确认密码"},null,8,["modelValue"])]),_:1}),o(n,{label:"企业名称",prop:"companyName"},{default:a(()=>[o(s,{modelValue:l.enterpriseForm.companyName,"onUpdate:modelValue":e[12]||(e[12]=r=>l.enterpriseForm.companyName=r),placeholder:"请输入企业名称"},null,8,["modelValue"])]),_:1}),o(n,{label:"企业类型",prop:"companyType"},{default:a(()=>[o(s,{modelValue:l.enterpriseForm.companyType,"onUpdate:modelValue":e[13]||(e[13]=r=>l.enterpriseForm.companyType=r),placeholder:"请输入企业类型"},null,8,["modelValue"])]),_:1}),o(n,{label:"联系人",prop:"contactPerson"},{default:a(()=>[o(s,{modelValue:l.enterpriseForm.contactPerson,"onUpdate:modelValue":e[14]||(e[14]=r=>l.enterpriseForm.contactPerson=r),placeholder:"请输入联系人姓名"},null,8,["modelValue"])]),_:1}),o(n,{label:"联系电话",prop:"contactPhone"},{default:a(()=>[o(s,{modelValue:l.enterpriseForm.contactPhone,"onUpdate:modelValue":e[15]||(e[15]=r=>l.enterpriseForm.contactPhone=r),placeholder:"请输入联系电话"},null,8,["modelValue"])]),_:1}),o(n,{label:"邮箱",prop:"email"},{default:a(()=>[o(s,{modelValue:l.enterpriseForm.email,"onUpdate:modelValue":e[16]||(e[16]=r=>l.enterpriseForm.email=r),placeholder:"请输入邮箱"},null,8,["modelValue"])]),_:1}),o(n,{label:"企业地址",prop:"address"},{default:a(()=>[o(s,{modelValue:l.enterpriseForm.address,"onUpdate:modelValue":e[17]||(e[17]=r=>l.enterpriseForm.address=r),placeholder:"请输入企业地址"},null,8,["modelValue"])]),_:1}),o(n,null,{default:a(()=>[i("div",j,[o(g,{type:"primary",onClick:e[18]||(e[18]=F(r=>l.register("enterprise"),["prevent"])),loading:l.loading},{default:a(()=>[...e[24]||(e[24]=[v("注册",-1)])]),_:1},8,["loading"]),o(g,{onClick:e[19]||(e[19]=F(r=>l.resetForm("enterpriseForm"),["prevent"]))},{default:a(()=>[...e[25]||(e[25]=[v("重置",-1)])]),_:1})])]),_:1}),e[26]||(e[26]=i("div",{class:"register-footer"},[i("a",{href:"/login"},"已有账号？立即登录")],-1))]),_:1},8,["model","rules"])]),_:1})]),_:1},8,["modelValue"])])])])}const J=T(E,[["render",A],["__scopeId","data-v-e148cf0c"]]);export{J as default};
