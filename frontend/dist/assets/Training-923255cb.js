import{_ as X,af as Y,aj as Z,ak as $,u as ee,al as le,l as te,ad as ae,aa as ne,ah as ie,am as se,an as oe,r as V,K as re,o as de,D as z,j as c,k as u,n as m,q as e,t as l,w as n,ai as ce,G as o,F as K,v as Q,E as ue,a5 as _e,y as v,I as p,Q as f,V as ve}from"./index-3d929bd0.js";import{r as R}from"./request-9595d616.js";const fe={name:"Training",components:{Clock:Y,Calendar:Z,View:$,User:ee,Coin:le,Location:te,Check:ae,Link:ne,Search:ie,Plus:se,StarFilled:oe},setup(){const P=V(""),t=re({category:"",format:"",level:"",duration:"",certification:"",priceRange:""}),S=V([]),a=V(0),C=V(1),I=V(12),D=V(!1),d=V(null);de(()=>{w()});const b=()=>{C.value=1,(t.format||t.duration||t.certification||t.priceRange)&&z.info("部分筛选项暂未接入，已按课程类别/等级搜索"),w()},N=()=>{Object.keys(t).forEach(i=>{t[i]=""}),P.value="",C.value=1,w()},r=async i=>{if(d.value=i,D.value=!0,i!=null&&i.id)try{const _=await R.get("/course/detail",{params:{courseId:i.id}});_.data&&(d.value=M(_.data))}catch{}},h=i=>{i.externalUrl?ue.confirm("即将跳转到外部培训平台进行报名，是否继续？","跳转确认",{confirmButtonText:"确认跳转",cancelButtonText:"取消",type:"info"}).then(()=>{window.open(i.externalUrl,"_blank"),z.success("已跳转到外部培训平台")}).catch(()=>{}):(z.success(`已报名培训：${i.title}`),D.value=!1)},y=async i=>{const _=Number(_e("/personal")||0);if(!_){z.warning("请先登录");return}try{await R({url:"/course/collect",method:"post",params:{userId:_,courseId:i.id}}),z.success(`已收藏培训：${i.title}`)}catch{z.error("收藏失败，请重试")}},T=i=>({服装设计:"primary",服装打版:"success",服装质检:"warning",服装营销:"info",生产管理:"danger",时尚趋势:"purple"})[i]||"info",E=i=>new Date(i).toLocaleDateString("zh-CN",{year:"numeric",month:"long",day:"numeric"}),L=()=>{d.value=null},g=i=>{I.value=i,C.value=1,w()},B=i=>{C.value=i,w()},F=i=>!i&&i!==0?"未知":i<60?`${i} 分钟`:i<24*60?`${Math.round(i/60)} 小时`:i<7*24*60?`${Math.round(i/(24*60))} 天`:`${Math.round(i/(7*24*60))} 周`,M=i=>{const _=(i.collectCount||0)>=10||(i.viewCount||0)>=100,U=i.price?Number(i.price):0;return{id:i.id,title:i.title,description:i.description||"",category:i.courseType||i.suitableJobType||"培训课程",format:i.url?"线上培训":"线下培训",level:i.suitableLevel||"",duration:F(i.duration),startDate:i.createTime||"",price:U,originalPrice:null,discount:null,certification:i.suitableLevel||"",isHot:_,enrollmentCount:i.collectCount||i.viewCount||0,rating:4.5,image:i.coverImage||"",externalUrl:i.url||"",trainer:{name:i.provider||"培训机构",title:"课程提供方",avatar:"",bio:""},modules:[],benefits:[],targetAudience:i.suitableJobType||"",location:i.url?"线上":"线下"}},w=async()=>{try{const _=(await R.get("/course/list",{params:{page:C.value,size:I.value,keyword:P.value||void 0,courseType:t.category||void 0,suitableLevel:t.level||void 0}})).data||{},U=_.records||[];S.value=U.map(j=>M(j)),a.value=_.total||S.value.length}catch{S.value=[],a.value=0,z.error("课程加载失败，请稍后重试")}};return{searchQuery:P,filters:t,trainings:S,totalTrainings:a,currentPage:C,pageSize:I,dialogVisible:D,selectedTraining:d,searchTrainings:b,resetFilters:N,viewTrainingDetail:r,enrollTraining:h,addFavorite:y,getCategoryColor:T,formatDate:E,resetSelectedTraining:L,handleSizeChange:g,handleCurrentChange:B}}},me={class:"training-container"},ge={class:"search-filter-section"},pe={class:"search-bar"},be={class:"filter-section"},he={class:"filter-form"},ye={class:"filter-actions"},Te={class:"training-list-section"},we={class:"section-header"},Ce={class:"result-count"},ke={class:"training-list"},Ve={class:"training-card-header"},ze=["src"],Ue={class:"training-tags"},xe={class:"training-card-content"},Se={class:"training-info"},De={class:"training-title"},Le={class:"training-meta"},Fe={class:"trainer-info"},Me=["src"],Pe={class:"trainer-name"},Ie={class:"trainer-title"},Be={class:"training-stats"},Ne={class:"enrollment-count"},Ee={class:"training-description"},je={class:"training-features"},Ke={class:"training-price-section"},Qe={class:"price-container"},Re={class:"price"},He={key:0,class:"original-price"},qe={class:"current-price"},Ae={key:0,class:"discount"},Je={class:"pagination"},Ge={key:0,class:"training-detail"},Oe={class:"training-detail-header"},We=["src"],Xe={class:"training-detail-tags"},Ye={class:"training-detail-content"},Ze={class:"training-info-section"},$e={class:"info-header"},el={class:"training-status"},ll={class:"enrollment-count"},tl={class:"trainer-section"},al={class:"trainer-detail"},nl=["src"],il={class:"trainer-detail-info"},sl={class:"trainer-title"},ol={class:"trainer-bio"},rl={class:"training-overview"},dl={class:"overview-grid"},cl={class:"overview-item"},ul={class:"overview-value"},_l={class:"overview-item"},vl={class:"overview-value"},fl={class:"overview-item"},ml={class:"overview-value"},gl={class:"overview-item"},pl={class:"overview-value"},bl={class:"overview-item"},hl={class:"overview-value"},yl={class:"overview-item"},Tl={class:"overview-value"},wl={class:"course-content"},Cl={class:"module-content"},kl={class:"module-duration"},Vl={class:"training-benefits"},zl={class:"benefits-list"},Ul={class:"training-price-sidebar"},xl={class:"price-display"},Sl={class:"current-price"},Dl={key:0,class:"original-price"},Ll={key:1,class:"discount-badge"},Fl={class:"price-features"},Ml={class:"feature-item"},Pl={class:"feature-item"},Il={class:"feature-item"},Bl={class:"feature-item"},Nl={key:0,class:"feature-item"};function El(P,t,S,a,C,I){var H;const D=c("Search"),d=c("el-icon"),b=c("el-button"),N=c("el-input"),r=c("el-option"),h=c("el-select"),y=c("el-form-item"),T=c("el-col"),E=c("el-row"),L=c("el-card"),g=c("el-tag"),B=c("el-rate"),F=c("Clock"),M=c("Calendar"),w=c("View"),i=c("Link"),_=c("Plus"),U=c("el-pagination"),j=c("User"),q=c("Coin"),A=c("Location"),J=c("el-timeline-item"),G=c("el-timeline"),x=c("Check"),O=c("StarFilled"),W=c("el-dialog");return u(),m("div",me,[t[39]||(t[39]=e("div",{class:"page-header"},[e("h2",null,"培训推荐"),e("p",null,"提升您的服装行业技能，开启职业新篇章")],-1)),e("div",ge,[e("div",pe,[l(N,{modelValue:a.searchQuery,"onUpdate:modelValue":t[0]||(t[0]=s=>a.searchQuery=s),placeholder:"搜索培训课程名称或关键词",clearable:"",onKeyup:ce(a.searchTrainings,["enter"])},{append:n(()=>[l(b,{type:"primary",onClick:a.searchTrainings},{default:n(()=>[l(d,{class:"button-icon"},{default:n(()=>[l(D)]),_:1}),t[11]||(t[11]=v(" 搜索 ",-1))]),_:1},8,["onClick"])]),_:1},8,["modelValue","onKeyup"])]),e("div",be,[l(L,{shadow:"hover"},{default:n(()=>[t[14]||(t[14]=e("h3",null,"筛选条件",-1)),e("div",he,[l(E,{gutter:20},{default:n(()=>[l(T,{span:8},{default:n(()=>[l(y,{label:"培训类别"},{default:n(()=>[l(h,{modelValue:a.filters.category,"onUpdate:modelValue":t[1]||(t[1]=s=>a.filters.category=s),placeholder:"请选择培训类别",clearable:""},{default:n(()=>[l(r,{label:"服装设计",value:"服装设计"}),l(r,{label:"服装打版",value:"服装打版"}),l(r,{label:"服装质检",value:"服装质检"}),l(r,{label:"服装营销",value:"服装营销"}),l(r,{label:"生产管理",value:"生产管理"}),l(r,{label:"时尚趋势",value:"时尚趋势"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(T,{span:8},{default:n(()=>[l(y,{label:"培训形式"},{default:n(()=>[l(h,{modelValue:a.filters.format,"onUpdate:modelValue":t[2]||(t[2]=s=>a.filters.format=s),placeholder:"请选择培训形式",clearable:""},{default:n(()=>[l(r,{label:"线上培训",value:"线上培训"}),l(r,{label:"线下培训",value:"线下培训"}),l(r,{label:"混合培训",value:"混合培训"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(T,{span:8},{default:n(()=>[l(y,{label:"培训级别"},{default:n(()=>[l(h,{modelValue:a.filters.level,"onUpdate:modelValue":t[3]||(t[3]=s=>a.filters.level=s),placeholder:"请选择培训级别",clearable:""},{default:n(()=>[l(r,{label:"初级",value:"初级"}),l(r,{label:"中级",value:"中级"}),l(r,{label:"高级",value:"高级"}),l(r,{label:"专家级",value:"专家级"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(T,{span:8},{default:n(()=>[l(y,{label:"培训时长"},{default:n(()=>[l(h,{modelValue:a.filters.duration,"onUpdate:modelValue":t[4]||(t[4]=s=>a.filters.duration=s),placeholder:"请选择培训时长",clearable:""},{default:n(()=>[l(r,{label:"1-3天",value:"1-3天"}),l(r,{label:"1-2周",value:"1-2周"}),l(r,{label:"1个月",value:"1个月"}),l(r,{label:"2-3个月",value:"2-3个月"}),l(r,{label:"3个月以上",value:"3个月以上"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(T,{span:8},{default:n(()=>[l(y,{label:"认证类型"},{default:n(()=>[l(h,{modelValue:a.filters.certification,"onUpdate:modelValue":t[5]||(t[5]=s=>a.filters.certification=s),placeholder:"请选择认证类型",clearable:""},{default:n(()=>[l(r,{label:"行业认证",value:"行业认证"}),l(r,{label:"企业认证",value:"企业认证"}),l(r,{label:"技能证书",value:"技能证书"}),l(r,{label:"无认证",value:"无认证"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(T,{span:8},{default:n(()=>[l(y,{label:"价格范围"},{default:n(()=>[l(h,{modelValue:a.filters.priceRange,"onUpdate:modelValue":t[6]||(t[6]=s=>a.filters.priceRange=s),placeholder:"请选择价格范围",clearable:""},{default:n(()=>[l(r,{label:"免费",value:"免费"}),l(r,{label:"1000元以下",value:"1000元以下"}),l(r,{label:"1000-5000元",value:"1000-5000元"}),l(r,{label:"5000-10000元",value:"5000-10000元"}),l(r,{label:"10000元以上",value:"10000元以上"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e("div",ye,[l(b,{type:"primary",onClick:a.searchTrainings},{default:n(()=>[...t[12]||(t[12]=[v("应用筛选",-1)])]),_:1},8,["onClick"]),l(b,{onClick:a.resetFilters},{default:n(()=>[...t[13]||(t[13]=[v("重置",-1)])]),_:1},8,["onClick"])])])]),_:1})])]),e("div",Te,[e("div",we,[t[15]||(t[15]=e("h3",null,"推荐课程",-1)),e("span",Ce,o(a.totalTrainings||a.trainings.length)+" 个课程",1)]),e("div",ke,[(u(!0),m(K,null,Q(a.trainings,s=>(u(),p(L,{key:s.id,shadow:"hover",class:"training-card",onClick:k=>a.viewTrainingDetail(s)},{default:n(()=>[e("div",Ve,[e("img",{src:s.image,alt:"培训封面",class:"training-image"},null,8,ze),e("div",Ue,[l(g,{size:"small",type:a.getCategoryColor(s.category)},{default:n(()=>[v(o(s.category),1)]),_:2},1032,["type"]),s.certification?(u(),p(g,{key:0,size:"small",type:"success"},{default:n(()=>[...t[16]||(t[16]=[v("认证课程",-1)])]),_:1})):f("",!0),s.isHot?(u(),p(g,{key:1,size:"small",type:"danger"},{default:n(()=>[...t[17]||(t[17]=[v("热门",-1)])]),_:1})):f("",!0),s.discount?(u(),p(g,{key:2,size:"small",type:"warning"},{default:n(()=>[...t[18]||(t[18]=[v("折扣",-1)])]),_:1})):f("",!0)])]),e("div",xe,[e("div",Se,[e("h4",De,o(s.title),1),e("div",Le,[e("div",Fe,[e("img",{src:s.trainer.avatar,alt:"讲师头像",class:"trainer-avatar"},null,8,Me),e("span",Pe,o(s.trainer.name),1),e("span",Ie,o(s.trainer.title),1)]),e("div",Be,[l(B,{modelValue:s.rating,"onUpdate:modelValue":k=>s.rating=k,disabled:"",size:"small","show-score":"","text-color":"#ff9900","score-template":"{value}"},null,8,["modelValue","onUpdate:modelValue"]),e("span",Ne,o(s.enrollmentCount)+" 人已报名",1)])]),e("div",Ee,o(s.description.substring(0,120))+"... ",1),e("div",je,[l(d,{class:"feature-icon"},{default:n(()=>[l(F)]),_:1}),e("span",null,o(s.duration),1),l(d,{class:"feature-icon"},{default:n(()=>[l(M)]),_:1}),e("span",null,o(a.formatDate(s.startDate)),1),l(d,{class:"feature-icon"},{default:n(()=>[l(w)]),_:1}),e("span",null,o(s.format),1)])]),e("div",Ke,[e("div",Qe,[e("div",Re,[s.discount?(u(),m("span",He,"¥"+o(s.originalPrice),1)):f("",!0),e("span",qe,"¥"+o(s.price),1)]),s.discount?(u(),m("div",Ae,o(s.discount)+"折 ",1)):f("",!0)]),l(b,{type:"primary",onClick:ve(k=>a.enrollTraining(s),["stop"])},{default:n(()=>[s.externalUrl?(u(),p(d,{key:0,class:"button-icon"},{default:n(()=>[l(i)]),_:1})):(u(),p(d,{key:1,class:"button-icon"},{default:n(()=>[l(_)]),_:1})),v(" "+o(s.externalUrl?"外部报名":"立即报名"),1)]),_:2},1032,["onClick"])])])]),_:2},1032,["onClick"]))),128))]),e("div",Je,[l(U,{onSizeChange:a.handleSizeChange,onCurrentChange:a.handleCurrentChange,"current-page":a.currentPage,"page-sizes":[12,24,48],"page-size":a.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:a.totalTrainings},null,8,["onSizeChange","onCurrentChange","current-page","page-size","total"])])]),l(W,{modelValue:a.dialogVisible,"onUpdate:modelValue":t[10]||(t[10]=s=>a.dialogVisible=s),title:((H=a.selectedTraining)==null?void 0:H.title)||"培训详情",width:"800px",onClose:a.resetSelectedTraining},{default:n(()=>[a.selectedTraining?(u(),m("div",Ge,[e("div",Oe,[e("img",{src:a.selectedTraining.image,alt:"培训封面",class:"training-detail-image"},null,8,We),e("div",Xe,[l(g,{size:"small",type:a.getCategoryColor(a.selectedTraining.category)},{default:n(()=>[v(o(a.selectedTraining.category),1)]),_:1},8,["type"]),a.selectedTraining.certification?(u(),p(g,{key:0,size:"small",type:"success"},{default:n(()=>[...t[19]||(t[19]=[v("认证课程",-1)])]),_:1})):f("",!0),a.selectedTraining.isHot?(u(),p(g,{key:1,size:"small",type:"danger"},{default:n(()=>[...t[20]||(t[20]=[v("热门",-1)])]),_:1})):f("",!0),a.selectedTraining.discount?(u(),p(g,{key:2,size:"small",type:"warning"},{default:n(()=>[...t[21]||(t[21]=[v("折扣",-1)])]),_:1})):f("",!0)])]),e("div",Ye,[e("div",Ze,[e("div",$e,[e("h3",null,o(a.selectedTraining.title),1),e("div",el,[l(B,{modelValue:a.selectedTraining.rating,"onUpdate:modelValue":t[7]||(t[7]=s=>a.selectedTraining.rating=s),disabled:"","show-score":"","text-color":"#ff9900","score-template":"{value} 分"},null,8,["modelValue"]),e("span",ll,o(a.selectedTraining.enrollmentCount)+" 人已报名",1)])]),e("div",tl,[t[22]||(t[22]=e("h4",null,"讲师信息",-1)),e("div",al,[e("img",{src:a.selectedTraining.trainer.avatar,alt:"讲师头像",class:"trainer-detail-avatar"},null,8,nl),e("div",il,[e("h5",null,o(a.selectedTraining.trainer.name),1),e("p",sl,o(a.selectedTraining.trainer.title),1),e("p",ol,o(a.selectedTraining.trainer.bio),1)])])]),e("div",rl,[t[29]||(t[29]=e("h4",null,"课程概况",-1)),e("div",dl,[e("div",cl,[l(d,{class:"overview-icon"},{default:n(()=>[l(F)]),_:1}),e("div",null,[t[23]||(t[23]=e("div",{class:"overview-label"},"培训时长",-1)),e("div",ul,o(a.selectedTraining.duration),1)])]),e("div",_l,[l(d,{class:"overview-icon"},{default:n(()=>[l(M)]),_:1}),e("div",null,[t[24]||(t[24]=e("div",{class:"overview-label"},"开始时间",-1)),e("div",vl,o(a.formatDate(a.selectedTraining.startDate)),1)])]),e("div",fl,[l(d,{class:"overview-icon"},{default:n(()=>[l(w)]),_:1}),e("div",null,[t[25]||(t[25]=e("div",{class:"overview-label"},"培训形式",-1)),e("div",ml,o(a.selectedTraining.format),1)])]),e("div",gl,[l(d,{class:"overview-icon"},{default:n(()=>[l(j)]),_:1}),e("div",null,[t[26]||(t[26]=e("div",{class:"overview-label"},"适合人群",-1)),e("div",pl,o(a.selectedTraining.targetAudience),1)])]),e("div",bl,[l(d,{class:"overview-icon"},{default:n(()=>[l(q)]),_:1}),e("div",null,[t[27]||(t[27]=e("div",{class:"overview-label"},"认证类型",-1)),e("div",hl,o(a.selectedTraining.certification||"无认证"),1)])]),e("div",yl,[l(d,{class:"overview-icon"},{default:n(()=>[l(A)]),_:1}),e("div",null,[t[28]||(t[28]=e("div",{class:"overview-label"},"培训地点",-1)),e("div",Tl,o(a.selectedTraining.location),1)])])])]),e("div",wl,[t[30]||(t[30]=e("h4",null,"课程内容",-1)),l(G,null,{default:n(()=>[(u(!0),m(K,null,Q(a.selectedTraining.modules,(s,k)=>(u(),p(J,{key:k,timestamp:s.title,placement:"top"},{default:n(()=>[e("div",Cl,[e("p",null,o(s.description),1),e("div",kl,[l(d,null,{default:n(()=>[l(F)]),_:1}),v(" "+o(s.duration),1)])])]),_:2},1032,["timestamp"]))),128))]),_:1})]),e("div",Vl,[t[31]||(t[31]=e("h4",null,"培训收益",-1)),e("ul",zl,[(u(!0),m(K,null,Q(a.selectedTraining.benefits,(s,k)=>(u(),m("li",{key:k},[l(d,{class:"benefit-icon"},{default:n(()=>[l(x)]),_:1}),v(" "+o(s),1)]))),128))])])]),e("div",Ul,[l(L,{shadow:"always",class:"price-card"},{default:n(()=>[e("div",xl,[e("div",Sl," ¥"+o(a.selectedTraining.price),1),a.selectedTraining.discount?(u(),m("div",Dl," 原价: ¥"+o(a.selectedTraining.originalPrice),1)):f("",!0),a.selectedTraining.discount?(u(),m("div",Ll,o(a.selectedTraining.discount)+"折 ",1)):f("",!0)]),e("div",Fl,[e("div",Ml,[l(d,null,{default:n(()=>[l(x)]),_:1}),t[32]||(t[32]=e("span",null,"课程视频",-1))]),e("div",Pl,[l(d,null,{default:n(()=>[l(x)]),_:1}),t[33]||(t[33]=e("span",null,"课后练习",-1))]),e("div",Il,[l(d,null,{default:n(()=>[l(x)]),_:1}),t[34]||(t[34]=e("span",null,"讲师答疑",-1))]),e("div",Bl,[l(d,null,{default:n(()=>[l(x)]),_:1}),t[35]||(t[35]=e("span",null,"学习资料",-1))]),a.selectedTraining.certification?(u(),m("div",Nl,[l(d,null,{default:n(()=>[l(x)]),_:1}),t[36]||(t[36]=e("span",null,"认证证书",-1))])):f("",!0)]),l(b,{type:"primary",size:"large",block:"",onClick:t[8]||(t[8]=s=>a.enrollTraining(a.selectedTraining))},{default:n(()=>[l(d,{class:"button-icon"},{default:n(()=>[l(_)]),_:1}),t[37]||(t[37]=v(" 立即报名 ",-1))]),_:1}),l(b,{size:"large",block:"",onClick:t[9]||(t[9]=s=>a.addFavorite(a.selectedTraining))},{default:n(()=>[l(d,{class:"button-icon"},{default:n(()=>[l(O)]),_:1}),t[38]||(t[38]=v(" 收藏课程 ",-1))]),_:1})]),_:1})])])])):f("",!0)]),_:1},8,["modelValue","title","onClose"])])}const Ql=X(fe,[["render",El],["__scopeId","data-v-b1a08384"]]);export{Ql as default};
