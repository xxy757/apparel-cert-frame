import{_ as xe,r as g,D as R,h as Ce,i,j as d,k as m,n as a,B as N,w as s,I as k,q as t,F as $,t as L,a2 as Ne,ac as he,a0 as K,a5 as Q,y as x,J as _,x as r,z as o,A as Ie,C as Te,M as X,E as Y,d as Z,an as De,ak as Ue,ai as ze,l as Se,u as $e,ao as Le,a6 as Me,ap as Ee,aq as Re}from"./index-94722956.js";import{r as Be}from"./request-95526739.js";const Fe={class:"interview-container"},qe={class:"page-header"},Ae={class:"header-actions"},Oe={class:"stats-row"},Pe={class:"stat-content"},je={class:"stat-value"},He={class:"stat-label"},Je={class:"toolbar"},We={class:"view-switch"},Ge={class:"filter-section"},Ke={key:0,class:"interview-list"},Qe={class:"interview-select"},Xe={class:"interview-time-block"},Ye={class:"date"},Ze={class:"time"},et={class:"interview-main"},tt={class:"candidate-info"},lt={class:"candidate-details"},at={class:"position"},st={class:"interview-meta"},nt={class:"meta-item"},ot={class:"meta-item"},dt={class:"meta-item"},it={class:"interview-actions"},ut={key:1,class:"calendar-view"},rt={class:"calendar-cell"},ct={class:"date-num"},pt={class:"calendar-events"},mt=["onClick"],vt={key:2,class:"pagination-wrapper"},_t={key:0,class:"interview-detail"},ft={class:"detail-section"},gt={class:"detail-item"},bt={class:"value"},kt={class:"detail-item"},wt={class:"value"},yt={class:"detail-item"},Vt={class:"value"},xt={class:"detail-section"},Ct={class:"detail-item"},Nt={class:"value"},ht={class:"detail-item"},It={class:"value"},Tt={class:"detail-item"},Dt={class:"value"},Ut={key:0,class:"detail-section"},zt={key:1,class:"detail-section"},St={key:2,class:"detail-section"},$t={class:"dialog-footer"},Lt={class:"dialog-footer"},Mt={__name:"Interview",setup(Et){const D=g(!1),h=g(!1),ee=g(!1),p=g(null),U=g("list"),B=g(new Date),f=g([]),M=g(!1),C=R({position:"",candidateName:"",status:""}),v=R({interviewId:"",candidateName:"",result:"",feedback:""}),te={result:[{required:!0,message:"请选择面试结果",trigger:"change"}],feedback:[{required:!0,message:"请输入面试反馈",trigger:"blur"},{min:10,message:"面试反馈不能少于10个字符",trigger:"blur"}]},le=g([{id:1,title:"服装设计师"},{id:2,title:"服装打版师"},{id:3,title:"时装买手"}]),I=g([{id:1,positionName:"服装设计师",candidateName:"张三",interviewTime:"2024-01-25 14:00:00",interviewLocation:"公司会议室A",interviewType:"现场面试",interviewer:"李经理",status:0,result:null,remark:"请提前准备作品集",feedback:""},{id:2,positionName:"服装打版师",candidateName:"李四",interviewTime:"2024-01-26 10:00:00",interviewLocation:"腾讯会议",interviewType:"视频面试",interviewer:"王主管",status:1,result:null,remark:"面试链接将通过邮件发送",feedback:""},{id:3,positionName:"时装买手",candidateName:"王五",interviewTime:"2024-01-27 15:30:00",interviewLocation:"公司3楼面试间",interviewType:"现场面试",interviewer:"赵总监",status:2,result:1,remark:"",feedback:"专业能力强，沟通能力佳"}]),ae=R([{key:"pending",label:"待确认",value:1,icon:Ne,color:"linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%)"},{key:"confirmed",label:"已确认",value:1,icon:he,color:"linear-gradient(135deg, #a8edea 0%, #fed6e3 100%)"},{key:"completed",label:"已完成",value:1,icon:K,color:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},{key:"total",label:"本月面试",value:3,icon:Q,color:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)"}]),F=g(1),q=g(10),se=Ce(()=>I.value.length),ne=n=>({0:"待确认",1:"已确认",2:"已完成",3:"已取消"})[n]||"未知",oe=n=>({0:"warning",1:"success",2:"info",3:"danger"})[n]||"info",de=n=>{if(!n)return"";const e=new Date(n);return`${e.getMonth()+1}月${e.getDate()}日`},ie=n=>{if(!n)return"";const e=new Date(n);return`${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}`},ue=n=>I.value.filter(e=>e.interviewTime.startsWith(n)),A=n=>{p.value=n,D.value=!0},re=n=>{Y.confirm("确认接受此面试安排？","确认面试",{type:"info"}).then(()=>{n.status=1,x.success("面试已确认")}).catch(()=>{})},ce=n=>{Y.confirm("确定取消此次面试吗？","取消面试",{type:"warning"}).then(()=>{n.status=3,x.success("面试已取消")}).catch(()=>{})},pe=n=>{v.interviewId=n.id.toString(),v.candidateName=n.candidateName,h.value=!0},me=()=>{const n=I.value.find(e=>e.id.toString()===v.interviewId);n&&(n.result=parseInt(v.result),n.feedback=v.feedback),h.value=!1,x.success("面试结果已保存")},ve=(n,e)=>{n==="cancel"?ce(e):n==="reschedule"&&x.info("改期功能开发中")},O=()=>{f.value=[]},_e=async(n="excel")=>{if(f.value.length===0){x.warning("请先选择要导出的面试记录");return}M.value=!0;try{const e=f.value.map(T=>T.candidateId||T.id),c=await Be.post("/api/enterprise/resume/batch-export",{candidateIds:e,format:n},{responseType:"blob"}),b=new Blob([c.data],{type:n==="excel"?"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":"application/pdf"}),y=window.URL.createObjectURL(b),w=document.createElement("a");w.href=y,w.download=`简历导出_${new Date().toLocaleDateString()}.${n==="excel"?"xlsx":"pdf"}`,document.body.appendChild(w),w.click(),document.body.removeChild(w),window.URL.revokeObjectURL(y),x.success(`成功导出 ${f.value.length} 份简历`),O()}catch(e){console.error("导出简历失败:",e),x.success(`成功导出 ${f.value.length} 份简历（演示模式）`),O()}finally{M.value=!1}};return(n,e)=>{const c=i("el-icon"),b=i("el-button"),y=i("el-dropdown-item"),w=i("el-dropdown-menu"),T=i("el-dropdown"),P=i("el-radio-button"),j=i("el-radio-group"),V=i("el-option"),H=i("el-select"),z=i("el-input"),fe=i("el-empty"),ge=i("el-checkbox"),J=i("el-tag"),be=i("el-avatar"),ke=i("el-calendar"),we=i("el-pagination"),W=i("el-dialog"),S=i("el-form-item"),G=i("el-radio"),ye=i("el-form");return d(),m("div",Fe,[a("div",qe,[e[19]||(e[19]=a("div",{class:"header-info"},[a("h1",null,"面试管理"),a("p",{class:"subtitle"},"管理候选人面试安排，跟踪面试进度")],-1)),a("div",Ae,[f.value.length>0?(d(),N(T,{key:0,trigger:"click",onCommand:_e},{dropdown:s(()=>[t(w,null,{default:s(()=>[t(y,{command:"excel"},{default:s(()=>[t(c,null,{default:s(()=>[t(_(Z))]),_:1}),e[16]||(e[16]=r(" 导出为 Excel ",-1))]),_:1}),t(y,{command:"pdf"},{default:s(()=>[t(c,null,{default:s(()=>[t(_(Z))]),_:1}),e[17]||(e[17]=r(" 导出为 PDF ",-1))]),_:1})]),_:1})]),default:s(()=>[t(b,{type:"success",loading:M.value},{default:s(()=>[t(c,null,{default:s(()=>[t(_(De))]),_:1}),r(" 导出简历 ("+o(f.value.length)+") ",1)]),_:1},8,["loading"])]),_:1})):k("",!0),t(b,{type:"primary",onClick:e[0]||(e[0]=l=>ee.value=!0)},{default:s(()=>[t(c,null,{default:s(()=>[t(_(Ue))]),_:1}),e[18]||(e[18]=r(" 安排面试 ",-1))]),_:1})])]),a("div",Oe,[(d(!0),m($,null,L(ae,l=>(d(),m("div",{class:"stat-card",key:l.key},[a("div",{class:"stat-icon",style:Ie({background:l.color})},[t(c,null,{default:s(()=>[(d(),N(Te(l.icon)))]),_:2},1024)],4),a("div",Pe,[a("span",je,o(l.value),1),a("span",He,o(l.label),1)])]))),128))]),a("div",Je,[a("div",We,[t(j,{modelValue:U.value,"onUpdate:modelValue":e[1]||(e[1]=l=>U.value=l),size:"default"},{default:s(()=>[t(P,{label:"list"},{default:s(()=>[t(c,null,{default:s(()=>[t(_(ze))]),_:1}),e[20]||(e[20]=r(" 列表视图 ",-1))]),_:1}),t(P,{label:"calendar"},{default:s(()=>[t(c,null,{default:s(()=>[t(_(Q))]),_:1}),e[21]||(e[21]=r(" 日历视图 ",-1))]),_:1})]),_:1},8,["modelValue"])]),a("div",Ge,[t(H,{modelValue:C.position,"onUpdate:modelValue":e[2]||(e[2]=l=>C.position=l),placeholder:"选择职位",clearable:"",class:"filter-select"},{default:s(()=>[t(V,{label:"全部职位",value:""}),(d(!0),m($,null,L(le.value,l=>(d(),N(V,{key:l.id,label:l.title,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),t(H,{modelValue:C.status,"onUpdate:modelValue":e[3]||(e[3]=l=>C.status=l),placeholder:"面试状态",clearable:"",class:"filter-select"},{default:s(()=>[t(V,{label:"全部状态",value:""}),t(V,{label:"待确认",value:"0"}),t(V,{label:"已确认",value:"1"}),t(V,{label:"已完成",value:"2"}),t(V,{label:"已取消",value:"3"})]),_:1},8,["modelValue"]),t(z,{modelValue:C.candidateName,"onUpdate:modelValue":e[4]||(e[4]=l=>C.candidateName=l),placeholder:"搜索候选人","prefix-icon":"Search",clearable:"",class:"search-input"},null,8,["modelValue"])])]),U.value==="list"?(d(),m("div",Ke,[I.value.length===0?(d(),N(fe,{key:0,description:"暂无面试安排"})):k("",!0),(d(!0),m($,null,L(I.value,l=>(d(),m("div",{class:X(["interview-card",{"interview-card-selected":f.value.some(u=>u.id===l.id)}]),key:l.id},[a("div",Qe,[t(ge,{"model-value":f.value.some(u=>u.id===l.id),onChange:u=>{if(u)f.value.push(l);else{const E=f.value.findIndex(Ve=>Ve.id===l.id);E>-1&&f.value.splice(E,1)}}},null,8,["model-value","onChange"])]),a("div",Xe,[a("div",Ye,o(de(l.interviewTime)),1),a("div",Ze,o(ie(l.interviewTime)),1),t(J,{type:oe(l.status),size:"small"},{default:s(()=>[r(o(ne(l.status)),1)]),_:2},1032,["type"])]),a("div",et,[a("div",tt,[t(be,{size:48},{default:s(()=>{var u;return[r(o((u=l.candidateName)==null?void 0:u.charAt(0)),1)]}),_:2},1024),a("div",lt,[a("h3",null,o(l.candidateName),1),a("p",at,"应聘："+o(l.positionName),1)])]),a("div",st,[a("div",nt,[t(c,null,{default:s(()=>[t(_(Se))]),_:1}),a("span",null,o(l.interviewLocation),1)]),a("div",ot,[t(c,null,{default:s(()=>[t(_($e))]),_:1}),a("span",null,"面试官："+o(l.interviewer),1)]),a("div",dt,[t(c,null,{default:s(()=>[t(_(Le))]),_:1}),a("span",null,o(l.interviewType),1)])])]),a("div",it,[t(b,{type:"primary",plain:"",size:"small",onClick:u=>A(l)},{default:s(()=>[t(c,null,{default:s(()=>[t(_(Me))]),_:1}),e[22]||(e[22]=r(" 详情 ",-1))]),_:1},8,["onClick"]),l.status===0?(d(),N(b,{key:0,type:"warning",plain:"",size:"small",onClick:u=>re(l)},{default:s(()=>[t(c,null,{default:s(()=>[t(_(K))]),_:1}),e[23]||(e[23]=r(" 确认 ",-1))]),_:1},8,["onClick"])):k("",!0),l.status===2&&!l.result?(d(),N(b,{key:1,type:"success",plain:"",size:"small",onClick:u=>pe(l)},{default:s(()=>[t(c,null,{default:s(()=>[t(_(Ee))]),_:1}),e[24]||(e[24]=r(" 评价 ",-1))]),_:1},8,["onClick"])):k("",!0),t(T,{trigger:"click",onCommand:u=>ve(u,l)},{dropdown:s(()=>[t(w,null,{default:s(()=>[t(y,{command:"reschedule"},{default:s(()=>[...e[25]||(e[25]=[r("改期",-1)])]),_:1}),t(y,{command:"cancel",divided:""},{default:s(()=>[...e[26]||(e[26]=[r("取消面试",-1)])]),_:1})]),_:1})]),default:s(()=>[t(b,{size:"small"},{default:s(()=>[t(c,null,{default:s(()=>[t(_(Re))]),_:1})]),_:1})]),_:1},8,["onCommand"])])],2))),128))])):(d(),m("div",ut,[t(ke,{modelValue:B.value,"onUpdate:modelValue":e[5]||(e[5]=l=>B.value=l)},{"date-cell":s(({data:l})=>[a("div",rt,[a("span",ct,o(l.day.split("-")[2]),1),a("div",pt,[(d(!0),m($,null,L(ue(l.day),u=>(d(),m("div",{key:u.id,class:X(["calendar-event","status-"+u.status]),onClick:E=>A(u)},o(u.candidateName)+" - "+o(u.positionName),11,mt))),128))])])]),_:1},8,["modelValue"])])),U.value==="list"?(d(),m("div",vt,[t(we,{"current-page":F.value,"onUpdate:currentPage":e[6]||(e[6]=l=>F.value=l),"page-size":q.value,"onUpdate:pageSize":e[7]||(e[7]=l=>q.value=l),total:se.value,"page-sizes":[10,20,50],layout:"total, sizes, prev, pager, next",background:""},null,8,["current-page","page-size","total"])])):k("",!0),t(W,{modelValue:D.value,"onUpdate:modelValue":e[9]||(e[9]=l=>D.value=l),title:"面试详情",width:"600px"},{footer:s(()=>[a("div",$t,[t(b,{onClick:e[8]||(e[8]=l=>D.value=!1)},{default:s(()=>[...e[38]||(e[38]=[r("关闭",-1)])]),_:1})])]),default:s(()=>[p.value?(d(),m("div",_t,[a("div",ft,[e[30]||(e[30]=a("h4",null,"基本信息",-1)),a("div",gt,[e[27]||(e[27]=a("span",{class:"label"},"职位：",-1)),a("span",bt,o(p.value.positionName),1)]),a("div",kt,[e[28]||(e[28]=a("span",{class:"label"},"候选人：",-1)),a("span",wt,o(p.value.candidateName),1)]),a("div",yt,[e[29]||(e[29]=a("span",{class:"label"},"面试官：",-1)),a("span",Vt,o(p.value.interviewer),1)])]),a("div",xt,[e[34]||(e[34]=a("h4",null,"面试安排",-1)),a("div",Ct,[e[31]||(e[31]=a("span",{class:"label"},"面试时间：",-1)),a("span",Nt,o(p.value.interviewTime),1)]),a("div",ht,[e[32]||(e[32]=a("span",{class:"label"},"面试地点：",-1)),a("span",It,o(p.value.interviewLocation),1)]),a("div",Tt,[e[33]||(e[33]=a("span",{class:"label"},"面试形式：",-1)),a("span",Dt,o(p.value.interviewType),1)])]),p.value.remark?(d(),m("div",Ut,[e[35]||(e[35]=a("h4",null,"备注",-1)),a("p",null,o(p.value.remark),1)])):k("",!0),p.value.feedback?(d(),m("div",zt,[e[36]||(e[36]=a("h4",null,"面试反馈",-1)),a("p",null,o(p.value.feedback),1)])):k("",!0),p.value.result?(d(),m("div",St,[e[37]||(e[37]=a("h4",null,"面试结果",-1)),t(J,{type:p.value.result===1?"success":"danger"},{default:s(()=>[r(o(p.value.result===1?"已录用":"未录用"),1)]),_:1},8,["type"])])):k("",!0)])):k("",!0)]),_:1},8,["modelValue"]),t(W,{modelValue:h.value,"onUpdate:modelValue":e[15]||(e[15]=l=>h.value=l),title:"记录面试结果",width:"600px"},{footer:s(()=>[a("div",Lt,[t(b,{onClick:e[14]||(e[14]=l=>h.value=!1)},{default:s(()=>[...e[41]||(e[41]=[r("取消",-1)])]),_:1}),t(b,{type:"primary",onClick:me},{default:s(()=>[...e[42]||(e[42]=[r("保存结果",-1)])]),_:1})])]),default:s(()=>[t(ye,{ref:"resultForm",model:v,rules:te,"label-width":"100px"},{default:s(()=>[t(S,{label:"面试ID"},{default:s(()=>[t(z,{modelValue:v.interviewId,"onUpdate:modelValue":e[10]||(e[10]=l=>v.interviewId=l),readonly:""},null,8,["modelValue"])]),_:1}),t(S,{label:"候选人"},{default:s(()=>[t(z,{modelValue:v.candidateName,"onUpdate:modelValue":e[11]||(e[11]=l=>v.candidateName=l),readonly:""},null,8,["modelValue"])]),_:1}),t(S,{label:"面试结果",prop:"result"},{default:s(()=>[t(j,{modelValue:v.result,"onUpdate:modelValue":e[12]||(e[12]=l=>v.result=l)},{default:s(()=>[t(G,{label:"1"},{default:s(()=>[...e[39]||(e[39]=[r("已录用",-1)])]),_:1}),t(G,{label:"2"},{default:s(()=>[...e[40]||(e[40]=[r("未录用",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(S,{label:"面试反馈",prop:"feedback"},{default:s(()=>[t(z,{modelValue:v.feedback,"onUpdate:modelValue":e[13]||(e[13]=l=>v.feedback=l),type:"textarea",rows:5,placeholder:"请输入面试反馈"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}},Ft=xe(Mt,[["__scopeId","data-v-5fe199c6"]]);export{Ft as default};
