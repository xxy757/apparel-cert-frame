import{_ as W,ak as X,al as Y,e as Z,am as $,r as w,D as Q,i,j as v,k as R,n as s,q as e,w as a,y as _,E as O,x as n,z as d,I as T,B as x}from"./index-94722956.js";import{r as ee}from"./request-95526739.js";const le={name:"JobManage",components:{Plus:X,Search:Y,ArrowDown:Z,Top:$},setup(){const F=w(!1),l=w(!1),z=w(null),o=w(null),M=w(!1),y=w([]),J=Q({title:"",status:""}),u=Q({id:null,title:"",jobType:"",workType:"全职",salaryMin:0,salaryMax:0,workLocation:"",recruitNum:1,skills:[],description:"",requirements:"",benefits:"",isUrgent:!1}),p={title:[{required:!0,message:"请输入职位名称",trigger:"blur"}],jobType:[{required:!0,message:"请选择岗位类型",trigger:"change"}],workType:[{required:!0,message:"请选择工作性质",trigger:"change"}],workLocation:[{required:!0,message:"请输入工作地点",trigger:"blur"}],description:[{required:!0,message:"请输入职位描述",trigger:"blur"}],requirements:[{required:!0,message:"请输入任职要求",trigger:"blur"}]},b=w([{id:1,title:"服装设计师",jobType:"设计师",salaryMin:8,salaryMax:15,workLocation:"北京",workType:"全职",recruitNum:2,skills:["服装设计","Adobe Illustrator","Adobe Photoshop"],description:"负责品牌服装的设计开发，参与产品规划，跟进样衣制作过程",requirements:`1. 服装设计相关专业，2年以上工作经验
2. 熟练使用AI、PS等设计软件
3. 有独立设计能力和创新思维`,benefits:"五险一金、带薪年假、节日福利、绩效奖金",status:1,viewCount:120,applyCount:25,createTime:"2024-01-15 10:30:00",isUrgent:!0,isTop:!0},{id:2,title:"服装打版师",jobType:"打版师",salaryMin:6,salaryMax:12,workLocation:"上海",workType:"全职",recruitNum:1,skills:["服装打版"],description:"负责服装版型设计，根据设计稿制作纸样，跟进生产过程",requirements:`1. 服装打版相关专业，3年以上工作经验
2. 熟练使用打版软件
3. 熟悉服装生产工艺`,benefits:"五险一金、年终奖、员工旅游",status:1,viewCount:85,applyCount:18,createTime:"2024-01-10 14:20:00",isUrgent:!1,isTop:!1},{id:3,title:"服装质检员",jobType:"质检员",salaryMin:5,salaryMax:8,workLocation:"广州",workType:"全职",recruitNum:3,skills:["质量检测"],description:"负责服装产品的质量检验，确保产品符合质量标准",requirements:`1. 有服装质检经验优先
2. 工作认真负责
3. 能适应加班`,benefits:"五险一金、包吃住、年终奖",status:2,viewCount:56,applyCount:12,createTime:"2024-01-08 09:00:00",isUrgent:!1,isTop:!1}]),c=w(1),m=w(10),j=w(b.value.length),L=t=>({0:"已结束",1:"招聘中",2:"暂停中"})[t]||"未知",S=t=>({0:"info",1:"success",2:"warning"})[t]||"info",f=()=>{u.id=null,u.title="",u.jobType="",u.workType="全职",u.salaryMin=0,u.salaryMax=0,u.workLocation="",u.recruitNum=1,u.skills=[],u.description="",u.requirements="",u.benefits="",u.isUrgent=!1},U=()=>{M.value=!1,f(),F.value=!0},C=()=>{var t;(t=o.value)==null||t.validate(r=>{r&&(M.value?_.success("职位修改成功"):_.success("职位发布成功"),F.value=!1)})},A=()=>{console.log("搜索职位:",J),_.info("搜索功能已触发")},k=()=>{J.title="",J.status=""},B=t=>{z.value=t,l.value=!0},P=t=>{M.value=!0,Object.assign(u,{id:t.id,title:t.title,jobType:t.jobType,workType:t.workType,salaryMin:t.salaryMin,salaryMax:t.salaryMax,workLocation:t.workLocation,recruitNum:t.recruitNum,skills:t.skills||[],description:t.description,requirements:t.requirements,benefits:t.benefits,isUrgent:t.isUrgent||!1}),l.value=!1,F.value=!0},I=(t,r)=>{switch(t){case"pause":r.status=2,_.success("职位已暂停招聘");break;case"resume":r.status=1,_.success("职位已恢复招聘");break;case"stop":r.status=0,_.success("职位已结束招聘");break;case"restart":r.status=1,_.success("职位已重新开始招聘");break;case"refresh":_.success("职位已刷新");break;case"top":q(r);break;case"delete":O.confirm("确定要删除该职位吗？","删除确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{const h=b.value.findIndex(V=>V.id===r.id);h>-1&&b.value.splice(h,1),_.success("职位已删除")}).catch(()=>{});break}},q=async t=>{const r=!t.isTop;try{await ee.put("/api/enterprise/job/top",{jobId:t.id,isTop:r}),t.isTop=r,b.value.sort((h,V)=>h.isTop&&!V.isTop?-1:!h.isTop&&V.isTop?1:0),_.success(r?"职位已置顶":"已取消置顶")}catch(h){console.error("置顶操作失败:",h),t.isTop=r,b.value.sort((V,H)=>V.isTop&&!H.isTop?-1:!V.isTop&&H.isTop?1:0),_.success(r?"职位已置顶":"已取消置顶")}},E=t=>{y.value=t},g=()=>{y.value=[]};return{createJobDialogVisible:F,jobDetailDialogVisible:l,selectedJob:z,jobFormRef:o,isEditing:M,selectedJobs:y,searchForm:J,jobForm:u,jobRules:p,jobs:b,currentPage:c,pageSize:m,totalJobs:j,getStatusText:L,getStatusTagType:S,openCreateJobDialog:U,submitJobForm:C,searchJobs:A,resetSearch:k,viewJobDetails:B,editJob:P,handleCommand:I,handleSelectionChange:E,clearSelection:g,batchPause:()=>{O.confirm(`确定要暂停选中的 ${y.value.length} 个职位吗？`,"批量暂停",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{y.value.forEach(t=>{t.status=2}),_.success(`已暂停 ${y.value.length} 个职位`),g()}).catch(()=>{})},batchDelete:()=>{O.confirm(`确定要删除选中的 ${y.value.length} 个职位吗？此操作不可恢复。`,"批量删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"error"}).then(()=>{const t=y.value.map(r=>r.id);b.value=b.value.filter(r=>!t.includes(r.id)),_.success(`已删除 ${y.value.length} 个职位`),g()}).catch(()=>{})},handleSizeChange:t=>{m.value=t,c.value=1},handleCurrentChange:t=>{c.value=t},toggleJobTop:q}}},te={class:"job-manage-container"},oe={class:"card-header"},ae={class:"header-left"},se={key:0,class:"header-right"},ne={class:"selected-count"},re={class:"job-filters"},ie={class:"job-title-cell"},de={class:"job-title"},ue={class:"salary-text"},me={class:"stat-num"},ce={class:"stat-num highlight"},pe={class:"pagination-container"},be={class:"salary-range"},fe={class:"dialog-footer"},_e={key:0,class:"job-detail"},ge={class:"detail-header"},ye={class:"detail-tags"},we={class:"detail-meta"},ve={class:"meta-item salary"},ke={class:"meta-item"},Te={class:"meta-item"},Ce={class:"meta-item"},he={class:"detail-stats"},Ve={class:"stat-item"},xe={class:"stat-value"},Je={class:"stat-item"},je={class:"stat-value"},Fe={class:"stat-item"},Me={class:"stat-value"},De={class:"detail-section"},Se={class:"detail-section"},Ue={style:{"white-space":"pre-line"}},qe={class:"detail-section"},Ne={class:"dialog-footer"};function ze(F,l,z,o,M,y){const J=i("Plus"),u=i("el-icon"),p=i("el-button"),b=i("el-input"),c=i("el-form-item"),m=i("el-option"),j=i("el-select"),L=i("Search"),S=i("el-form"),f=i("el-table-column"),U=i("Top"),C=i("el-tag"),A=i("ArrowDown"),k=i("el-dropdown-item"),B=i("el-dropdown-menu"),P=i("el-dropdown"),I=i("el-table"),q=i("el-pagination"),E=i("el-card"),g=i("el-col"),D=i("el-row"),N=i("el-input-number"),G=i("el-switch"),K=i("el-dialog");return v(),R("div",te,[l[48]||(l[48]=s("div",{class:"page-header"},[s("h2",null,"职位管理"),s("p",null,"管理您发布的招聘职位")],-1)),e(E,{shadow:"hover",class:"main-card"},{header:a(()=>[s("div",oe,[s("div",ae,[e(p,{type:"primary",onClick:o.openCreateJobDialog},{default:a(()=>[e(u,null,{default:a(()=>[e(J)]),_:1}),l[19]||(l[19]=n(" 发布职位 ",-1))]),_:1},8,["onClick"])]),o.selectedJobs.length>0?(v(),R("div",se,[s("span",ne,"已选择 "+d(o.selectedJobs.length)+" 个职位",1),e(p,{type:"warning",onClick:o.batchPause},{default:a(()=>[...l[20]||(l[20]=[n("批量暂停",-1)])]),_:1},8,["onClick"]),e(p,{type:"danger",onClick:o.batchDelete},{default:a(()=>[...l[21]||(l[21]=[n("批量删除",-1)])]),_:1},8,["onClick"]),e(p,{onClick:o.clearSelection},{default:a(()=>[...l[22]||(l[22]=[n("取消选择",-1)])]),_:1},8,["onClick"])])):T("",!0)])]),default:a(()=>[s("div",re,[e(S,{inline:!0,model:o.searchForm,"label-width":"80px"},{default:a(()=>[e(c,{label:"职位名称"},{default:a(()=>[e(b,{modelValue:o.searchForm.title,"onUpdate:modelValue":l[0]||(l[0]=t=>o.searchForm.title=t),placeholder:"请输入职位名称",clearable:""},null,8,["modelValue"])]),_:1}),e(c,{label:"职位状态"},{default:a(()=>[e(j,{modelValue:o.searchForm.status,"onUpdate:modelValue":l[1]||(l[1]=t=>o.searchForm.status=t),placeholder:"请选择状态",clearable:""},{default:a(()=>[e(m,{label:"全部",value:""}),e(m,{label:"招聘中",value:"1"}),e(m,{label:"已结束",value:"0"}),e(m,{label:"暂停招聘",value:"2"})]),_:1},8,["modelValue"])]),_:1}),e(c,null,{default:a(()=>[e(p,{type:"primary",onClick:o.searchJobs},{default:a(()=>[e(u,null,{default:a(()=>[e(L)]),_:1}),l[23]||(l[23]=n(" 查询 ",-1))]),_:1},8,["onClick"]),e(p,{onClick:o.resetSearch},{default:a(()=>[...l[24]||(l[24]=[n("重置",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),e(I,{data:o.jobs,style:{width:"100%"},onSelectionChange:o.handleSelectionChange,class:"job-table"},{default:a(()=>[e(f,{type:"selection",width:"55"}),e(f,{prop:"id",label:"职位ID",width:"80"}),e(f,{prop:"title",label:"职位名称","min-width":"180"},{default:a(t=>[s("div",ie,[t.row.isTop?(v(),x(C,{key:0,size:"small",type:"warning",class:"top-tag"},{default:a(()=>[e(u,null,{default:a(()=>[e(U)]),_:1}),l[25]||(l[25]=n(" 置顶 ",-1))]),_:1})):T("",!0),s("span",de,d(t.row.title),1),t.row.isUrgent?(v(),x(C,{key:1,size:"small",type:"danger"},{default:a(()=>[...l[26]||(l[26]=[n("急聘",-1)])]),_:1})):T("",!0)])]),_:1}),e(f,{prop:"jobType",label:"岗位类型",width:"100"}),e(f,{prop:"salaryMin",label:"薪资范围",width:"120"},{default:a(t=>[s("span",ue,d(t.row.salaryMin)+"K - "+d(t.row.salaryMax)+"K",1)]),_:1}),e(f,{prop:"workLocation",label:"工作地点",width:"100"}),e(f,{prop:"status",label:"状态",width:"100"},{default:a(t=>[e(C,{type:o.getStatusTagType(t.row.status),effect:"light"},{default:a(()=>[n(d(o.getStatusText(t.row.status)),1)]),_:2},1032,["type"])]),_:1}),e(f,{prop:"viewCount",label:"浏览",width:"70"},{default:a(t=>[s("span",me,d(t.row.viewCount),1)]),_:1}),e(f,{prop:"applyCount",label:"投递",width:"70"},{default:a(t=>[s("span",ce,d(t.row.applyCount),1)]),_:1}),e(f,{prop:"createTime",label:"发布时间",width:"150"}),e(f,{label:"操作",width:"200",fixed:"right"},{default:a(t=>[e(p,{type:"primary",link:"",onClick:r=>o.viewJobDetails(t.row)},{default:a(()=>[...l[27]||(l[27]=[n("详情",-1)])]),_:1},8,["onClick"]),e(p,{type:"warning",link:"",onClick:r=>o.editJob(t.row)},{default:a(()=>[...l[28]||(l[28]=[n("编辑",-1)])]),_:1},8,["onClick"]),e(P,{trigger:"click",onCommand:r=>o.handleCommand(r,t.row)},{dropdown:a(()=>[e(B,null,{default:a(()=>[e(k,{command:"top"},{default:a(()=>[e(u,null,{default:a(()=>[e(U)]),_:1}),n(" "+d(t.row.isTop?"取消置顶":"置顶职位"),1)]),_:2},1024),t.row.status===1?(v(),x(k,{key:0,command:"pause"},{default:a(()=>[...l[30]||(l[30]=[n("暂停招聘",-1)])]),_:1})):T("",!0),t.row.status===2?(v(),x(k,{key:1,command:"resume"},{default:a(()=>[...l[31]||(l[31]=[n("恢复招聘",-1)])]),_:1})):T("",!0),t.row.status!==0?(v(),x(k,{key:2,command:"stop"},{default:a(()=>[...l[32]||(l[32]=[n("结束招聘",-1)])]),_:1})):T("",!0),t.row.status===0?(v(),x(k,{key:3,command:"restart"},{default:a(()=>[...l[33]||(l[33]=[n("重新招聘",-1)])]),_:1})):T("",!0),e(k,{command:"refresh"},{default:a(()=>[...l[34]||(l[34]=[n("刷新职位",-1)])]),_:1}),e(k,{command:"delete",divided:""},{default:a(()=>[...l[35]||(l[35]=[n("删除职位",-1)])]),_:1})]),_:2},1024)]),default:a(()=>[e(p,{type:"info",link:""},{default:a(()=>[l[29]||(l[29]=n(" 更多 ",-1)),e(u,null,{default:a(()=>[e(A)]),_:1})]),_:1})]),_:2},1032,["onCommand"])]),_:1})]),_:1},8,["data","onSelectionChange"]),s("div",pe,[e(q,{onSizeChange:o.handleSizeChange,onCurrentChange:o.handleCurrentChange,"current-page":o.currentPage,"page-sizes":[10,20,50,100],"page-size":o.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:o.totalJobs},null,8,["onSizeChange","onCurrentChange","current-page","page-size","total"])])]),_:1}),e(K,{modelValue:o.createJobDialogVisible,"onUpdate:modelValue":l[15]||(l[15]=t=>o.createJobDialogVisible=t),title:o.isEditing?"编辑职位":"发布职位",width:"800px",class:"job-dialog"},{footer:a(()=>[s("div",fe,[e(p,{onClick:l[14]||(l[14]=t=>o.createJobDialogVisible=!1)},{default:a(()=>[...l[38]||(l[38]=[n("取消",-1)])]),_:1}),e(p,{type:"primary",onClick:o.submitJobForm},{default:a(()=>[n(d(o.isEditing?"保存修改":"发布职位"),1)]),_:1},8,["onClick"])])]),default:a(()=>[e(S,{ref:"jobFormRef",model:o.jobForm,rules:o.jobRules,"label-width":"100px"},{default:a(()=>[e(D,{gutter:20},{default:a(()=>[e(g,{span:12},{default:a(()=>[e(c,{label:"职位名称",prop:"title"},{default:a(()=>[e(b,{modelValue:o.jobForm.title,"onUpdate:modelValue":l[2]||(l[2]=t=>o.jobForm.title=t),placeholder:"请输入职位名称"},null,8,["modelValue"])]),_:1})]),_:1}),e(g,{span:12},{default:a(()=>[e(c,{label:"岗位类型",prop:"jobType"},{default:a(()=>[e(j,{modelValue:o.jobForm.jobType,"onUpdate:modelValue":l[3]||(l[3]=t=>o.jobForm.jobType=t),placeholder:"请选择岗位类型",style:{width:"100%"}},{default:a(()=>[e(m,{label:"设计师",value:"设计师"}),e(m,{label:"打版师",value:"打版师"}),e(m,{label:"质检员",value:"质检员"}),e(m,{label:"导购",value:"导购"}),e(m,{label:"其他",value:"其他"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(D,{gutter:20},{default:a(()=>[e(g,{span:12},{default:a(()=>[e(c,{label:"工作性质",prop:"workType"},{default:a(()=>[e(j,{modelValue:o.jobForm.workType,"onUpdate:modelValue":l[4]||(l[4]=t=>o.jobForm.workType=t),placeholder:"请选择工作性质",style:{width:"100%"}},{default:a(()=>[e(m,{label:"全职",value:"全职"}),e(m,{label:"兼职",value:"兼职"}),e(m,{label:"实习",value:"实习"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(g,{span:12},{default:a(()=>[e(c,{label:"工作地点",prop:"workLocation"},{default:a(()=>[e(b,{modelValue:o.jobForm.workLocation,"onUpdate:modelValue":l[5]||(l[5]=t=>o.jobForm.workLocation=t),placeholder:"请输入工作地点"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(D,{gutter:20},{default:a(()=>[e(g,{span:12},{default:a(()=>[e(c,{label:"薪资范围",prop:"salaryMin"},{default:a(()=>[s("div",be,[e(N,{modelValue:o.jobForm.salaryMin,"onUpdate:modelValue":l[6]||(l[6]=t=>o.jobForm.salaryMin=t),min:0,step:1,placeholder:"最低"},null,8,["modelValue"]),l[36]||(l[36]=s("span",{class:"salary-separator"},"-",-1)),e(N,{modelValue:o.jobForm.salaryMax,"onUpdate:modelValue":l[7]||(l[7]=t=>o.jobForm.salaryMax=t),min:0,step:1,placeholder:"最高"},null,8,["modelValue"]),l[37]||(l[37]=s("span",{class:"salary-unit"},"K",-1))])]),_:1})]),_:1}),e(g,{span:12},{default:a(()=>[e(c,{label:"招聘人数",prop:"recruitNum"},{default:a(()=>[e(N,{modelValue:o.jobForm.recruitNum,"onUpdate:modelValue":l[8]||(l[8]=t=>o.jobForm.recruitNum=t),min:1,step:1,style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(c,{label:"技能要求",prop:"skills"},{default:a(()=>[e(j,{modelValue:o.jobForm.skills,"onUpdate:modelValue":l[9]||(l[9]=t=>o.jobForm.skills=t),multiple:"",placeholder:"请选择技能要求",style:{width:"100%"}},{default:a(()=>[e(m,{label:"服装设计",value:"服装设计"}),e(m,{label:"Adobe Illustrator",value:"Adobe Illustrator"}),e(m,{label:"Adobe Photoshop",value:"Adobe Photoshop"}),e(m,{label:"服装打版",value:"服装打版"}),e(m,{label:"质量检测",value:"质量检测"}),e(m,{label:"CAD制图",value:"CAD制图"})]),_:1},8,["modelValue"])]),_:1}),e(c,{label:"职位描述",prop:"description"},{default:a(()=>[e(b,{modelValue:o.jobForm.description,"onUpdate:modelValue":l[10]||(l[10]=t=>o.jobForm.description=t),type:"textarea",rows:4,placeholder:"请输入职位描述"},null,8,["modelValue"])]),_:1}),e(c,{label:"任职要求",prop:"requirements"},{default:a(()=>[e(b,{modelValue:o.jobForm.requirements,"onUpdate:modelValue":l[11]||(l[11]=t=>o.jobForm.requirements=t),type:"textarea",rows:4,placeholder:"请输入任职要求"},null,8,["modelValue"])]),_:1}),e(c,{label:"福利待遇",prop:"benefits"},{default:a(()=>[e(b,{modelValue:o.jobForm.benefits,"onUpdate:modelValue":l[12]||(l[12]=t=>o.jobForm.benefits=t),type:"textarea",rows:2,placeholder:"请输入福利待遇"},null,8,["modelValue"])]),_:1}),e(D,{gutter:20},{default:a(()=>[e(g,{span:12},{default:a(()=>[e(c,{label:"急聘标记"},{default:a(()=>[e(G,{modelValue:o.jobForm.isUrgent,"onUpdate:modelValue":l[13]||(l[13]=t=>o.jobForm.isUrgent=t),"active-text":"是","inactive-text":"否"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"]),e(K,{modelValue:o.jobDetailDialogVisible,"onUpdate:modelValue":l[18]||(l[18]=t=>o.jobDetailDialogVisible=t),title:"职位详情",width:"650px",class:"detail-dialog"},{footer:a(()=>[s("div",Ne,[e(p,{onClick:l[16]||(l[16]=t=>o.jobDetailDialogVisible=!1)},{default:a(()=>[...l[46]||(l[46]=[n("关闭",-1)])]),_:1}),e(p,{type:"primary",onClick:l[17]||(l[17]=t=>o.editJob(o.selectedJob))},{default:a(()=>[...l[47]||(l[47]=[n("编辑职位",-1)])]),_:1})])]),default:a(()=>{var t;return[o.selectedJob?(v(),R("div",_e,[s("div",ge,[s("h3",null,d(o.selectedJob.title),1),s("div",ye,[e(C,{type:o.getStatusTagType(o.selectedJob.status)},{default:a(()=>[n(d(o.getStatusText(o.selectedJob.status)),1)]),_:1},8,["type"]),o.selectedJob.isUrgent?(v(),x(C,{key:0,type:"danger"},{default:a(()=>[...l[39]||(l[39]=[n("急聘",-1)])]),_:1})):T("",!0)])]),s("div",we,[s("span",ve,d(o.selectedJob.salaryMin)+"K - "+d(o.selectedJob.salaryMax)+"K",1),s("span",ke,d(o.selectedJob.workType),1),s("span",Te,d(o.selectedJob.workLocation),1),s("span",Ce,"招"+d(o.selectedJob.recruitNum)+"人",1)]),s("div",he,[s("div",Ve,[s("span",xe,d(o.selectedJob.viewCount),1),l[40]||(l[40]=s("span",{class:"stat-label"},"浏览量",-1))]),s("div",Je,[s("span",je,d(o.selectedJob.applyCount),1),l[41]||(l[41]=s("span",{class:"stat-label"},"投递数",-1))]),s("div",Fe,[s("span",Me,d((t=o.selectedJob.createTime)==null?void 0:t.split(" ")[0]),1),l[42]||(l[42]=s("span",{class:"stat-label"},"发布日期",-1))])]),s("div",De,[l[43]||(l[43]=s("h4",null,"职位描述",-1)),s("p",null,d(o.selectedJob.description),1)]),s("div",Se,[l[44]||(l[44]=s("h4",null,"任职要求",-1)),s("p",Ue,d(o.selectedJob.requirements),1)]),s("div",qe,[l[45]||(l[45]=s("h4",null,"福利待遇",-1)),s("p",null,d(o.selectedJob.benefits),1)])])):T("",!0)]}),_:1},8,["modelValue"])])}const Be=W(le,[["render",ze],["__scopeId","data-v-87a23523"]]);export{Be as default};
