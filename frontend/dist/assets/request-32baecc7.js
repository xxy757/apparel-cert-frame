import{a2 as t,E as o}from"./index-a65af770.js";const s=t.create({baseURL:"/api",timeout:15e3,headers:{"Content-Type":"application/json"}});s.interceptors.request.use(e=>{const r=localStorage.getItem("token");return r&&(e.headers.Authorization=`Bearer ${r}`),e},e=>(console.error("请求错误:",e),Promise.reject(e)));s.interceptors.response.use(e=>{const r=e.data;return r.code&&r.code!==200?(o.error(r.message||"请求失败"),r.code===401&&(localStorage.removeItem("token"),localStorage.removeItem("userType"),window.location.href="/login"),Promise.reject(new Error(r.message||"请求失败"))):r},e=>{var r;if(console.error("响应错误:",e),e.response)switch(e.response.status){case 401:o.error("登录已过期，请重新登录"),localStorage.removeItem("token"),localStorage.removeItem("userType"),window.location.href="/login";break;case 403:o.error("没有权限访问");break;case 404:o.error("请求的资源不存在");break;case 500:o.error("服务器内部错误");break;default:o.error(((r=e.response.data)==null?void 0:r.message)||"请求失败")}else e.request?o.error("网络连接失败，请检查网络"):o.error("请求配置错误");return Promise.reject(e)});export{s as r};
