import{_ as S,e as U,u as A,f as B,g as k,a1 as I,r as M,K as j,o as z,i as E,a2 as f,j as r,k as N,n as T,q as o,t as n,w as a,G as c,C as V,D as q,z as F,y as _}from"./index-3d929bd0.js";import{r as P}from"./request-9595d616.js";import{e as g}from"./eventBus-7f99bbc0.js";const R={name:"PersonalCenter",components:{ArrowDown:U,User:A,SwitchButton:B},setup(){const l=k(),e=I(),m=M("/personal/profile"),t=j({name:"",careerDirection:"",avatar:""});z(()=>{m.value=e.path,u(),g.on("user-updated",u)}),E(()=>{g.off("user-updated",u)});const u=async()=>{try{const s=await P.get("/auth/current-user");if(s.code===200){const d=s.data;t.name=d.name||f("1").username||"",t.careerDirection=d.careerDirection||"",t.avatar=d.avatar||""}else console.error("获取用户信息失败:",s.message),t.name=f("1").username||""}catch(s){console.error("获取用户信息异常:",s),t.name=f("1").username||""}},v=s=>{s==="profile"?l.push("/personal/profile"):s==="logout"&&i()},i=()=>{V("1"),localStorage.removeItem("savedPassword"),localStorage.removeItem("savedUsername"),sessionStorage.clear(),q.success("退出登录成功");const s=F();s==="2"?l.push("/enterprise/job"):s==="3"?l.push("/admin/dashboard"):l.push("/login")};return{activeMenu:m,user:t,handleCommand:v,logout:i}}},G={class:"personal-container"},K={class:"personal-sidebar"},H={class:"user-info"},J={class:"avatar"},L={class:"user-details"},O={class:"career-direction"},Q={class:"personal-main"},W={class:"top-header"},X={class:"header-right"},Y={class:"user-dropdown"},Z={class:"username"},$={class:"personal-content"};function ee(l,e,m,t,u,v){const i=r("el-avatar"),s=r("el-menu-item"),d=r("el-menu"),x=r("ArrowDown"),p=r("el-icon"),h=r("User"),w=r("el-dropdown-item"),D=r("SwitchButton"),b=r("el-dropdown-menu"),y=r("el-dropdown"),C=r("router-view");return N(),T("div",G,[o("div",K,[o("div",H,[o("div",J,[n(i,{size:"large",src:t.user.avatar},{default:a(()=>[_(c(t.user.name?t.user.name.charAt(0):"U"),1)]),_:1},8,["src"])]),o("div",L,[o("h3",null,c(t.user.name||"未登录"),1),e[0]||(e[0]=o("p",{class:"user-type"},"个人用户",-1)),o("p",O,c(t.user.careerDirection||"未设置职业方向"),1)])]),n(d,{"default-active":t.activeMenu,class:"sidebar-menu",router:"","background-color":"#304156","text-color":"#bfcbd9","active-text-color":"#409EFF"},{default:a(()=>[n(s,{index:"/personal/profile"},{title:a(()=>[...e[1]||(e[1]=[o("span",null,"个人信息",-1)])]),_:1}),n(s,{index:"/personal/resume"},{title:a(()=>[...e[2]||(e[2]=[o("span",null,"简历管理",-1)])]),_:1}),n(s,{index:"/personal/certification"},{title:a(()=>[...e[3]||(e[3]=[o("span",null,"技能认证",-1)])]),_:1}),n(s,{index:"/personal/job"},{title:a(()=>[...e[4]||(e[4]=[o("span",null,"求职服务",-1)])]),_:1}),n(s,{index:"/personal/training"},{title:a(()=>[...e[5]||(e[5]=[o("span",null,"培训推荐",-1)])]),_:1}),n(s,{index:"/personal/applications"},{title:a(()=>[...e[6]||(e[6]=[o("span",null,"我的申请",-1)])]),_:1}),n(s,{index:"/personal/messages"},{title:a(()=>[...e[7]||(e[7]=[o("span",null,"消息中心",-1)])]),_:1})]),_:1},8,["default-active"])]),o("div",Q,[o("div",W,[e[10]||(e[10]=o("div",{class:"header-left"},null,-1)),o("div",X,[n(y,{trigger:"click",onCommand:t.handleCommand},{dropdown:a(()=>[n(b,null,{default:a(()=>[n(w,{command:"profile"},{default:a(()=>[n(p,null,{default:a(()=>[n(h)]),_:1}),e[8]||(e[8]=_(" 个人信息 ",-1))]),_:1}),n(w,{command:"logout",divided:""},{default:a(()=>[n(p,null,{default:a(()=>[n(D)]),_:1}),e[9]||(e[9]=_(" 退出登录 ",-1))]),_:1})]),_:1})]),default:a(()=>[o("div",Y,[n(i,{size:36,src:t.user.avatar},{default:a(()=>[_(c(t.user.name?t.user.name.charAt(0):"U"),1)]),_:1},8,["src"]),o("span",Z,c(t.user.name||"用户"),1),n(p,null,{default:a(()=>[n(x)]),_:1})])]),_:1},8,["onCommand"])])]),o("div",$,[n(C)])])])}const te=S(R,[["render",ee],["__scopeId","data-v-8e8610c2"]]);export{te as default};
