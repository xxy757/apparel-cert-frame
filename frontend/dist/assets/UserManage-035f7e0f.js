import{_ as q,r as y,z as S,o as B,e as i,f as C,g as R,i as e,w as r,E as _,h as T,n as m,x as D,t as M}from"./index-a65af770.js";const E={name:"UserManage",setup(){const h=y(null),l=y(!1),d=S({username:"",userType:"",status:""}),a=S({username:"",password:"",email:"",phone:"",userType:"personal",status:"1"}),V={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:20,message:"长度在 3 到 20 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:20,message:"长度在 6 到 20 个字符",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:"blur"}],phone:[{required:!0,message:"请输入电话",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号码",trigger:"blur"}],userType:[{required:!0,message:"请选择用户类型",trigger:"change"}],status:[{required:!0,message:"请选择用户状态",trigger:"change"}]},b=y([]),u=y(1),c=y(10),n=y(0),o=[{id:1,username:"张三",email:"zhangsan@example.com",phone:"13800138001",userType:"personal",status:1,createTime:"2024-01-15 10:30:00"},{id:2,username:"李四",email:"lisi@example.com",phone:"13800138002",userType:"enterprise",status:1,createTime:"2024-01-16 14:20:00"},{id:3,username:"王五",email:"wangwu@example.com",phone:"13800138003",userType:"personal",status:1,createTime:"2024-01-17 09:15:00"},{id:4,username:"赵六",email:"zhaoliu@example.com",phone:"13800138004",userType:"admin",status:1,createTime:"2024-01-18 16:45:00"},{id:5,username:"孙七",email:"sunqi@example.com",phone:"13800138005",userType:"enterprise",status:0,createTime:"2024-01-19 11:20:00"},{id:6,username:"周八",email:"zhouba@example.com",phone:"13800138006",userType:"personal",status:1,createTime:"2024-01-20 15:30:00"},{id:7,username:"吴九",email:"wujiu@example.com",phone:"13800138007",userType:"personal",status:1,createTime:"2024-01-21 08:45:00"},{id:8,username:"郑十",email:"zhengshi@example.com",phone:"13800138008",userType:"enterprise",status:1,createTime:"2024-01-22 13:10:00"}];B(()=>{p()});const p=()=>{b.value=o,n.value=o.length};return{userFormRef:h,createUserDialogVisible:l,searchForm:d,userForm:a,userRules:V,users:b,currentPage:u,pageSize:c,totalUsers:n,getUserTypeText:t=>({personal:"个人用户",enterprise:"企业用户",admin:"管理员"})[t]||"未知",getUserTypeTagType:t=>({personal:"info",enterprise:"success",admin:"warning"})[t]||"info",getStatusText:t=>t===1?"正常":"禁用",getStatusTagType:t=>t===1?"success":"danger",openCreateUserDialog:()=>{a.username="",a.password="",a.email="",a.phone="",a.userType="personal",a.status="1",l.value=!0},createUser:()=>{h.value.validate(t=>{if(t)_.success("用户添加成功"),l.value=!1,p();else return!1})},searchUsers:()=>{let t=[...o];d.username&&(t=t.filter(f=>f.username.includes(d.username))),d.userType&&(t=t.filter(f=>f.userType===d.userType)),d.status&&(t=t.filter(f=>f.status===parseInt(d.status))),b.value=t,n.value=t.length,u.value=1},resetSearch:()=>{d.username="",d.userType="",d.status="",p()},viewUserDetails:t=>{_.info("查看用户详情功能开发中")},editUser:t=>{_.info("编辑用户功能开发中")},disableUser:t=>{_.success("用户已禁用"),t.status=0},enableUser:t=>{_.success("用户已启用"),t.status=1},handleSizeChange:t=>{c.value=t,p()},handleCurrentChange:t=>{u.value=t,p()}}}},I={class:"user-manage-container"},N={class:"card-header"},j={class:"user-filters"},P={class:"pagination-container"},A={class:"dialog-footer"};function G(h,l,d,a,V,b){const u=i("el-button"),c=i("el-input"),n=i("el-form-item"),o=i("el-option"),p=i("el-select"),v=i("el-form"),g=i("el-table-column"),w=i("el-tag"),x=i("el-table"),F=i("el-pagination"),k=i("el-card"),z=i("el-dialog");return C(),R("div",I,[e(k,{shadow:"hover"},{header:r(()=>[T("div",N,[l[12]||(l[12]=T("h2",null,"用户管理",-1)),e(u,{type:"primary",onClick:a.openCreateUserDialog},{default:r(()=>[...l[11]||(l[11]=[m("添加用户",-1)])]),_:1},8,["onClick"])])]),default:r(()=>[T("div",j,[e(v,{inline:!0,model:a.searchForm,"label-width":"80px"},{default:r(()=>[e(n,{label:"用户名"},{default:r(()=>[e(c,{modelValue:a.searchForm.username,"onUpdate:modelValue":l[0]||(l[0]=s=>a.searchForm.username=s),placeholder:"请输入用户名"},null,8,["modelValue"])]),_:1}),e(n,{label:"用户类型"},{default:r(()=>[e(p,{modelValue:a.searchForm.userType,"onUpdate:modelValue":l[1]||(l[1]=s=>a.searchForm.userType=s),placeholder:"请选择用户类型"},{default:r(()=>[e(o,{label:"全部",value:""}),e(o,{label:"个人用户",value:"personal"}),e(o,{label:"企业用户",value:"enterprise"}),e(o,{label:"管理员",value:"admin"})]),_:1},8,["modelValue"])]),_:1}),e(n,{label:"用户状态"},{default:r(()=>[e(p,{modelValue:a.searchForm.status,"onUpdate:modelValue":l[2]||(l[2]=s=>a.searchForm.status=s),placeholder:"请选择状态"},{default:r(()=>[e(o,{label:"全部",value:""}),e(o,{label:"正常",value:"1"}),e(o,{label:"禁用",value:"0"})]),_:1},8,["modelValue"])]),_:1}),e(n,null,{default:r(()=>[e(u,{type:"primary",onClick:a.searchUsers},{default:r(()=>[...l[13]||(l[13]=[m("查询",-1)])]),_:1},8,["onClick"]),e(u,{onClick:a.resetSearch},{default:r(()=>[...l[14]||(l[14]=[m("重置",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),e(x,{data:a.users,style:{width:"100%"}},{default:r(()=>[e(g,{prop:"id",label:"用户ID",width:"100"}),e(g,{prop:"username",label:"用户名"}),e(g,{prop:"email",label:"邮箱"}),e(g,{prop:"phone",label:"电话",width:"120"}),e(g,{prop:"userType",label:"用户类型",width:"120"},{default:r(s=>[e(w,{type:a.getUserTypeTagType(s.row.userType)},{default:r(()=>[m(D(a.getUserTypeText(s.row.userType)),1)]),_:2},1032,["type"])]),_:1}),e(g,{prop:"status",label:"状态",width:"100"},{default:r(s=>[e(w,{type:a.getStatusTagType(s.row.status)},{default:r(()=>[m(D(a.getStatusText(s.row.status)),1)]),_:2},1032,["type"])]),_:1}),e(g,{prop:"createTime",label:"注册时间",width:"180"}),e(g,{label:"操作",width:"200",fixed:"right"},{default:r(s=>[e(u,{type:"primary",size:"small",onClick:U=>a.viewUserDetails(s.row)},{default:r(()=>[...l[15]||(l[15]=[m("查看详情",-1)])]),_:1},8,["onClick"]),e(u,{type:"warning",size:"small",onClick:U=>a.editUser(s.row)},{default:r(()=>[...l[16]||(l[16]=[m("编辑",-1)])]),_:1},8,["onClick"]),s.row.status===1?(C(),M(u,{key:0,type:"danger",size:"small",onClick:U=>a.disableUser(s.row)},{default:r(()=>[...l[17]||(l[17]=[m("禁用",-1)])]),_:1},8,["onClick"])):(C(),M(u,{key:1,type:"success",size:"small",onClick:U=>a.enableUser(s.row)},{default:r(()=>[...l[18]||(l[18]=[m("启用",-1)])]),_:1},8,["onClick"]))]),_:1})]),_:1},8,["data"]),T("div",P,[e(F,{onSizeChange:a.handleSizeChange,onCurrentChange:a.handleCurrentChange,"current-page":a.currentPage,"page-sizes":[10,20,50,100],"page-size":a.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:a.totalUsers},null,8,["onSizeChange","onCurrentChange","current-page","page-size","total"])])]),_:1}),e(z,{modelValue:a.createUserDialogVisible,"onUpdate:modelValue":l[10]||(l[10]=s=>a.createUserDialogVisible=s),title:"添加用户",width:"600px"},{footer:r(()=>[T("span",A,[e(u,{onClick:l[9]||(l[9]=s=>a.createUserDialogVisible=!1)},{default:r(()=>[...l[19]||(l[19]=[m("取消",-1)])]),_:1}),e(u,{type:"primary",onClick:a.createUser},{default:r(()=>[...l[20]||(l[20]=[m("确定",-1)])]),_:1},8,["onClick"])])]),default:r(()=>[e(v,{ref:"userFormRef",model:a.userForm,rules:a.userRules,"label-width":"120px"},{default:r(()=>[e(n,{label:"用户名",prop:"username"},{default:r(()=>[e(c,{modelValue:a.userForm.username,"onUpdate:modelValue":l[3]||(l[3]=s=>a.userForm.username=s),placeholder:"请输入用户名"},null,8,["modelValue"])]),_:1}),e(n,{label:"密码",prop:"password"},{default:r(()=>[e(c,{modelValue:a.userForm.password,"onUpdate:modelValue":l[4]||(l[4]=s=>a.userForm.password=s),type:"password",placeholder:"请输入密码"},null,8,["modelValue"])]),_:1}),e(n,{label:"邮箱",prop:"email"},{default:r(()=>[e(c,{modelValue:a.userForm.email,"onUpdate:modelValue":l[5]||(l[5]=s=>a.userForm.email=s),placeholder:"请输入邮箱"},null,8,["modelValue"])]),_:1}),e(n,{label:"电话",prop:"phone"},{default:r(()=>[e(c,{modelValue:a.userForm.phone,"onUpdate:modelValue":l[6]||(l[6]=s=>a.userForm.phone=s),placeholder:"请输入电话"},null,8,["modelValue"])]),_:1}),e(n,{label:"用户类型",prop:"userType"},{default:r(()=>[e(p,{modelValue:a.userForm.userType,"onUpdate:modelValue":l[7]||(l[7]=s=>a.userForm.userType=s),placeholder:"请选择用户类型"},{default:r(()=>[e(o,{label:"个人用户",value:"personal"}),e(o,{label:"企业用户",value:"enterprise"}),e(o,{label:"管理员",value:"admin"})]),_:1},8,["modelValue"])]),_:1}),e(n,{label:"用户状态",prop:"status"},{default:r(()=>[e(p,{modelValue:a.userForm.status,"onUpdate:modelValue":l[8]||(l[8]=s=>a.userForm.status=s),placeholder:"请选择用户状态"},{default:r(()=>[e(o,{label:"正常",value:"1"}),e(o,{label:"禁用",value:"0"})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])])}const W=q(E,[["render",G],["__scopeId","data-v-5613ac8d"]]);export{W as default};
