import{_ as fe,g as ge,r as V,D as L,h as B,G as ce,i as f,j as y,k as Q,n as t,q as e,w as a,J as m,K as q,L as T,M as W,B as P,C as _e,x as i,z as c,I as z,A as ve,N,y as x,O as H,u as X,P as R,a as Y,Q as ee,p as le,R as ae,l as be}from"./index-94722956.js";import{r as we}from"./request-95526739.js";const ye={class:"register-container"},Ve={class:"register-card"},xe={class:"register-header"},ke={class:"logo"},Pe={class:"step-content"},ze={key:0,class:"field-hint"},he={class:"password-strength"},Ce={class:"strength-bar"},Ue={class:"strength-text"},qe={class:"step-content"},Te={class:"step-content complete-step"},De={class:"complete-icon"},Ne={class:"step-actions"},Re={class:"step-content"},Se={class:"step-content"},Fe={class:"step-content complete-step"},$e={class:"complete-icon"},Be={class:"step-actions"},Ee={class:"register-footer"},Me={__name:"Register",setup(je){const se=ge(),D=V(!1),S=V("personal"),b=V(0),w=V(0),k=V(!1),h=V(""),E=V(null),M=V(null),n=L({username:"",password:"",confirmPassword:"",name:"",phone:"",email:"",careerDirection:"",experience:""}),r=L({username:"",password:"",confirmPassword:"",companyName:"",companyType:"",contactPerson:"",contactPhone:"",email:"",address:""}),F=B(()=>{const d=n.password||r.password;if(!d)return"";let l=0;return d.length>=6&&l++,d.length>=10&&l++,/[a-z]/.test(d)&&/[A-Z]/.test(d)&&l++,/\d/.test(d)&&l++,/[!@#$%^&*]/.test(d)&&l++,l<=2?"weak":l<=3?"medium":"strong"}),te=B(()=>({weak:"33%",medium:"66%",strong:"100%"})[F.value]||"0%"),re=B(()=>({weak:"弱",medium:"中",strong:"强"})[F.value]||""),j=(d,l,o)=>{const _=S.value==="personal"?n:r;l!==_.password?o(new Error("两次输入密码不一致")):o()},oe={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:6,max:20,message:"用户名长度在 6 到 20 个字符",trigger:"blur"},{pattern:/^[a-zA-Z0-9_]+$/,message:"用户名只能包含字母、数字和下划线",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度不能少于 6 个字符",trigger:"blur"}],confirmPassword:[{required:!0,message:"请确认密码",trigger:"blur"},{validator:j,trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:"blur"}],name:[{required:!0,message:"请输入真实姓名",trigger:"blur"}],phone:[{required:!0,message:"请输入手机号",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号",trigger:"blur"}],careerDirection:[{required:!0,message:"请选择职业方向",trigger:"change"}]},ne={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:6,max:20,message:"用户名长度在 6 到 20 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度不能少于 6 个字符",trigger:"blur"}],confirmPassword:[{required:!0,message:"请确认密码",trigger:"blur"},{validator:j,trigger:"blur"}],email:[{required:!0,message:"请输入企业邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:"blur"}],companyName:[{required:!0,message:"请输入企业名称",trigger:"blur"}],companyType:[{required:!0,message:"请选择企业类型",trigger:"change"}],contactPerson:[{required:!0,message:"请输入联系人姓名",trigger:"blur"}],contactPhone:[{required:!0,message:"请输入联系电话",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号",trigger:"blur"}]};ce(()=>n.username,async d=>{d&&d.length>=6?h.value=Math.random()>.3?"available":"taken":h.value=""});const ie=async()=>{const d=b.value===0?["username","password","confirmPassword","email"]:["name","phone","careerDirection"];try{await E.value.validateField(d),b.value++}catch{x.warning("请完善当前步骤的信息")}},de=async()=>{const d=w.value===0?["username","password","confirmPassword","email"]:["companyName","companyType","contactPerson","contactPhone"];try{await M.value.validateField(d),w.value++}catch{x.warning("请完善当前步骤的信息")}},A=async d=>{if(!k.value){x.warning("请先同意用户服务协议和隐私政策");return}D.value=!0;const l=d==="personal"?n:r;try{const o={username:l.username,password:l.password,email:l.email};let _="";d==="personal"?(_="/auth/register/personal",Object.assign(o,{name:l.name,phone:l.phone,careerDirection:l.careerDirection,experience:l.experience})):(_="/auth/register/enterprise",Object.assign(o,{companyName:l.companyName,companyType:l.companyType,contactPerson:l.contactPerson,contactPhone:l.contactPhone,address:l.address}));const C=await we.post(_,o);C.code===200||C.data?(x.success(d==="personal"?"注册成功！请登录":"注册成功！待审核后可登录"),setTimeout(()=>se.push("/login"),1500)):x.error(C.message||"注册失败")}catch(o){x.error(o.message||"注册失败，请稍后重试")}finally{D.value=!1}},O=()=>x.info("用户服务协议"),I=()=>x.info("隐私政策");return(d,l)=>{const o=f("el-icon"),_=f("el-step"),C=f("el-steps"),g=f("el-input"),u=f("el-form-item"),p=f("el-option"),$=f("el-select"),v=f("el-descriptions-item"),Z=f("el-descriptions"),G=f("el-checkbox"),U=f("el-button"),J=f("el-form"),K=f("el-tab-pane"),ue=f("el-alert"),pe=f("el-tabs"),me=f("router-link");return y(),Q("div",ye,[l[42]||(l[42]=t("div",{class:"register-bg"},[t("div",{class:"bg-shape shape-1"}),t("div",{class:"bg-shape shape-2"}),t("div",{class:"bg-shape shape-3"})],-1)),t("div",Ve,[t("div",xe,[t("div",ke,[e(o,{size:40},{default:a(()=>[e(m(H))]),_:1})]),l[24]||(l[24]=t("h1",null,"服装行业人才认证平台",-1)),l[25]||(l[25]=t("p",null,"创建账号，开启职业新旅程",-1))]),e(pe,{modelValue:S.value,"onUpdate:modelValue":l[23]||(l[23]=s=>S.value=s),class:"register-tabs"},{default:a(()=>[e(K,{label:"个人注册",name:"personal"},{default:a(()=>[e(J,{ref_key:"personalFormRef",ref:E,model:n,rules:oe,"label-position":"top"},{default:a(()=>[e(C,{active:b.value,simple:"",class:"register-steps"},{default:a(()=>[e(_,{title:"账号信息"}),e(_,{title:"个人信息"}),e(_,{title:"完成注册"})]),_:1},8,["active"]),q(t("div",Pe,[e(u,{label:"用户名",prop:"username"},{default:a(()=>[e(g,{modelValue:n.username,"onUpdate:modelValue":l[0]||(l[0]=s=>n.username=s),placeholder:"6-20位字母、数字或下划线",size:"large"},{prefix:a(()=>[e(o,null,{default:a(()=>[e(m(X))]),_:1})]),_:1},8,["modelValue"]),h.value?(y(),Q("div",ze,[e(o,{class:W(h.value)},{default:a(()=>[(y(),P(_e(h.value==="available"?"CircleCheck":"CircleClose")))]),_:1},8,["class"]),i(" "+c(h.value==="available"?"用户名可用":"用户名已被占用"),1)])):z("",!0)]),_:1}),e(u,{label:"密码",prop:"password"},{default:a(()=>[e(g,{modelValue:n.password,"onUpdate:modelValue":l[1]||(l[1]=s=>n.password=s),type:"password",placeholder:"至少6位，包含字母和数字",size:"large","show-password":""},{prefix:a(()=>[e(o,null,{default:a(()=>[e(m(R))]),_:1})]),_:1},8,["modelValue"]),t("div",he,[l[26]||(l[26]=t("span",null,"密码强度：",-1)),t("div",Ce,[t("div",{class:W(["strength-level",F.value]),style:ve({width:te.value})},null,6)]),t("span",Ue,c(re.value),1)])]),_:1}),e(u,{label:"确认密码",prop:"confirmPassword"},{default:a(()=>[e(g,{modelValue:n.confirmPassword,"onUpdate:modelValue":l[2]||(l[2]=s=>n.confirmPassword=s),type:"password",placeholder:"请再次输入密码",size:"large","show-password":""},{prefix:a(()=>[e(o,null,{default:a(()=>[e(m(R))]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(u,{label:"邮箱",prop:"email"},{default:a(()=>[e(g,{modelValue:n.email,"onUpdate:modelValue":l[3]||(l[3]=s=>n.email=s),placeholder:"用于接收验证邮件和找回密码",size:"large"},{prefix:a(()=>[e(o,null,{default:a(()=>[e(m(Y))]),_:1})]),_:1},8,["modelValue"])]),_:1})],512),[[T,b.value===0]]),q(t("div",qe,[e(u,{label:"真实姓名",prop:"name"},{default:a(()=>[e(g,{modelValue:n.name,"onUpdate:modelValue":l[4]||(l[4]=s=>n.name=s),placeholder:"请输入真实姓名",size:"large"},{prefix:a(()=>[e(o,null,{default:a(()=>[e(m(ee))]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(u,{label:"手机号码",prop:"phone"},{default:a(()=>[e(g,{modelValue:n.phone,"onUpdate:modelValue":l[5]||(l[5]=s=>n.phone=s),placeholder:"请输入手机号码",size:"large"},{prefix:a(()=>[e(o,null,{default:a(()=>[e(m(le))]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(u,{label:"职业方向",prop:"careerDirection"},{default:a(()=>[e($,{modelValue:n.careerDirection,"onUpdate:modelValue":l[6]||(l[6]=s=>n.careerDirection=s),placeholder:"请选择您的职业方向",size:"large",style:{width:"100%"}},{default:a(()=>[e(p,{label:"服装设计师",value:"服装设计师"}),e(p,{label:"服装打版师",value:"服装打版师"}),e(p,{label:"服装质检员",value:"服装质检员"}),e(p,{label:"服装导购",value:"服装导购"}),e(p,{label:"生产管理",value:"生产管理"}),e(p,{label:"时装买手",value:"时装买手"}),e(p,{label:"其他",value:"其他"})]),_:1},8,["modelValue"])]),_:1}),e(u,{label:"工作经验"},{default:a(()=>[e($,{modelValue:n.experience,"onUpdate:modelValue":l[7]||(l[7]=s=>n.experience=s),placeholder:"请选择工作经验",size:"large",style:{width:"100%"}},{default:a(()=>[e(p,{label:"应届毕业生",value:"应届毕业生"}),e(p,{label:"1-3年",value:"1-3年"}),e(p,{label:"3-5年",value:"3-5年"}),e(p,{label:"5-10年",value:"5-10年"}),e(p,{label:"10年以上",value:"10年以上"})]),_:1},8,["modelValue"])]),_:1})],512),[[T,b.value===1]]),q(t("div",Te,[t("div",De,[e(o,{size:80,color:"#67c23a"},{default:a(()=>[e(m(ae))]),_:1})]),l[29]||(l[29]=t("h3",null,"信息确认",-1)),e(Z,{column:1,border:""},{default:a(()=>[e(v,{label:"用户名"},{default:a(()=>[i(c(n.username),1)]),_:1}),e(v,{label:"邮箱"},{default:a(()=>[i(c(n.email),1)]),_:1}),e(v,{label:"姓名"},{default:a(()=>[i(c(n.name),1)]),_:1}),e(v,{label:"手机号"},{default:a(()=>[i(c(n.phone),1)]),_:1}),e(v,{label:"职业方向"},{default:a(()=>[i(c(n.careerDirection),1)]),_:1})]),_:1}),e(G,{modelValue:k.value,"onUpdate:modelValue":l[8]||(l[8]=s=>k.value=s),class:"terms-checkbox"},{default:a(()=>[l[27]||(l[27]=i(" 我已阅读并同意 ",-1)),t("a",{href:"#",onClick:N(O,["prevent"])},"《用户服务协议》"),l[28]||(l[28]=i(" 和 ",-1)),t("a",{href:"#",onClick:N(I,["prevent"])},"《隐私政策》")]),_:1},8,["modelValue"])],512),[[T,b.value===2]]),t("div",Ne,[b.value>0?(y(),P(U,{key:0,onClick:l[9]||(l[9]=s=>b.value--),size:"large"},{default:a(()=>[...l[30]||(l[30]=[i("上一步",-1)])]),_:1})):z("",!0),b.value<2?(y(),P(U,{key:1,type:"primary",onClick:ie,size:"large"},{default:a(()=>[...l[31]||(l[31]=[i("下一步",-1)])]),_:1})):z("",!0),b.value===2?(y(),P(U,{key:2,type:"primary",onClick:l[10]||(l[10]=s=>A("personal")),size:"large",loading:D.value,disabled:!k.value},{default:a(()=>[...l[32]||(l[32]=[i(" 完成注册 ",-1)])]),_:1},8,["loading","disabled"])):z("",!0)])]),_:1},8,["model"])]),_:1}),e(K,{label:"企业注册",name:"enterprise"},{default:a(()=>[e(J,{ref_key:"enterpriseFormRef",ref:M,model:r,rules:ne,"label-position":"top"},{default:a(()=>[e(C,{active:w.value,simple:"",class:"register-steps"},{default:a(()=>[e(_,{title:"账号信息"}),e(_,{title:"企业信息"}),e(_,{title:"完成注册"})]),_:1},8,["active"]),q(t("div",Re,[e(u,{label:"用户名",prop:"username"},{default:a(()=>[e(g,{modelValue:r.username,"onUpdate:modelValue":l[11]||(l[11]=s=>r.username=s),placeholder:"6-20位字母、数字或下划线",size:"large"},{prefix:a(()=>[e(o,null,{default:a(()=>[e(m(X))]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(u,{label:"密码",prop:"password"},{default:a(()=>[e(g,{modelValue:r.password,"onUpdate:modelValue":l[12]||(l[12]=s=>r.password=s),type:"password",placeholder:"至少6位，包含字母和数字",size:"large","show-password":""},{prefix:a(()=>[e(o,null,{default:a(()=>[e(m(R))]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(u,{label:"确认密码",prop:"confirmPassword"},{default:a(()=>[e(g,{modelValue:r.confirmPassword,"onUpdate:modelValue":l[13]||(l[13]=s=>r.confirmPassword=s),type:"password",placeholder:"请再次输入密码",size:"large","show-password":""},{prefix:a(()=>[e(o,null,{default:a(()=>[e(m(R))]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(u,{label:"企业邮箱",prop:"email"},{default:a(()=>[e(g,{modelValue:r.email,"onUpdate:modelValue":l[14]||(l[14]=s=>r.email=s),placeholder:"请使用企业邮箱注册",size:"large"},{prefix:a(()=>[e(o,null,{default:a(()=>[e(m(Y))]),_:1})]),_:1},8,["modelValue"])]),_:1})],512),[[T,w.value===0]]),q(t("div",Se,[e(u,{label:"企业名称",prop:"companyName"},{default:a(()=>[e(g,{modelValue:r.companyName,"onUpdate:modelValue":l[15]||(l[15]=s=>r.companyName=s),placeholder:"请输入企业全称",size:"large"},{prefix:a(()=>[e(o,null,{default:a(()=>[e(m(H))]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(u,{label:"企业类型",prop:"companyType"},{default:a(()=>[e($,{modelValue:r.companyType,"onUpdate:modelValue":l[16]||(l[16]=s=>r.companyType=s),placeholder:"请选择企业类型",size:"large",style:{width:"100%"}},{default:a(()=>[e(p,{label:"服装生产企业",value:"服装生产企业"}),e(p,{label:"服装品牌公司",value:"服装品牌公司"}),e(p,{label:"服装贸易公司",value:"服装贸易公司"}),e(p,{label:"服装零售企业",value:"服装零售企业"}),e(p,{label:"其他",value:"其他"})]),_:1},8,["modelValue"])]),_:1}),e(u,{label:"联系人",prop:"contactPerson"},{default:a(()=>[e(g,{modelValue:r.contactPerson,"onUpdate:modelValue":l[17]||(l[17]=s=>r.contactPerson=s),placeholder:"请输入联系人姓名",size:"large"},{prefix:a(()=>[e(o,null,{default:a(()=>[e(m(ee))]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(u,{label:"联系电话",prop:"contactPhone"},{default:a(()=>[e(g,{modelValue:r.contactPhone,"onUpdate:modelValue":l[18]||(l[18]=s=>r.contactPhone=s),placeholder:"请输入联系电话",size:"large"},{prefix:a(()=>[e(o,null,{default:a(()=>[e(m(le))]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(u,{label:"企业地址",prop:"address"},{default:a(()=>[e(g,{modelValue:r.address,"onUpdate:modelValue":l[19]||(l[19]=s=>r.address=s),placeholder:"请输入企业地址",size:"large"},{prefix:a(()=>[e(o,null,{default:a(()=>[e(m(be))]),_:1})]),_:1},8,["modelValue"])]),_:1})],512),[[T,w.value===1]]),q(t("div",Fe,[t("div",$e,[e(o,{size:80,color:"#67c23a"},{default:a(()=>[e(m(ae))]),_:1})]),l[36]||(l[36]=t("h3",null,"信息确认",-1)),e(Z,{column:1,border:""},{default:a(()=>[e(v,{label:"用户名"},{default:a(()=>[i(c(r.username),1)]),_:1}),e(v,{label:"企业邮箱"},{default:a(()=>[i(c(r.email),1)]),_:1}),e(v,{label:"企业名称"},{default:a(()=>[i(c(r.companyName),1)]),_:1}),e(v,{label:"企业类型"},{default:a(()=>[i(c(r.companyType),1)]),_:1}),e(v,{label:"联系人"},{default:a(()=>[i(c(r.contactPerson),1)]),_:1}),e(v,{label:"联系电话"},{default:a(()=>[i(c(r.contactPhone),1)]),_:1})]),_:1}),e(ue,{type:"info",closable:!1,style:{"margin-top":"16px"}},{default:a(()=>[...l[33]||(l[33]=[i(" 企业注册后需要提交资质认证，审核通过后方可使用全部功能 ",-1)])]),_:1}),e(G,{modelValue:k.value,"onUpdate:modelValue":l[20]||(l[20]=s=>k.value=s),class:"terms-checkbox"},{default:a(()=>[l[34]||(l[34]=i(" 我已阅读并同意 ",-1)),t("a",{href:"#",onClick:N(O,["prevent"])},"《用户服务协议》"),l[35]||(l[35]=i(" 和 ",-1)),t("a",{href:"#",onClick:N(I,["prevent"])},"《隐私政策》")]),_:1},8,["modelValue"])],512),[[T,w.value===2]]),t("div",Be,[w.value>0?(y(),P(U,{key:0,onClick:l[21]||(l[21]=s=>w.value--),size:"large"},{default:a(()=>[...l[37]||(l[37]=[i("上一步",-1)])]),_:1})):z("",!0),w.value<2?(y(),P(U,{key:1,type:"primary",onClick:de,size:"large"},{default:a(()=>[...l[38]||(l[38]=[i("下一步",-1)])]),_:1})):z("",!0),w.value===2?(y(),P(U,{key:2,type:"primary",onClick:l[22]||(l[22]=s=>A("enterprise")),size:"large",loading:D.value,disabled:!k.value},{default:a(()=>[...l[39]||(l[39]=[i(" 完成注册 ",-1)])]),_:1},8,["loading","disabled"])):z("",!0)])]),_:1},8,["model"])]),_:1})]),_:1},8,["modelValue"]),t("div",Ee,[l[41]||(l[41]=t("span",null,"已有账号？",-1)),e(me,{to:"/login"},{default:a(()=>[...l[40]||(l[40]=[i("立即登录",-1)])]),_:1})])])])}}},Ie=fe(Me,[["__scopeId","data-v-76351c01"]]);export{Ie as default};
