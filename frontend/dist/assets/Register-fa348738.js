import{_ as ue,g as pe,r as x,K as H,h as $,j as g,k as P,n as me,q as t,t as e,w as a,R as m,S as U,T as h,U as ge,H as fe,G as _,y as d,V as D,I as q,Q as T,D as y,W as K,u as Q,X as N,a as X,Y,p as J,Z as L,l as ce}from"./index-3d929bd0.js";import{r as _e}from"./request-9595d616.js";const ve={class:"register-container"},be={class:"register-card"},we={class:"register-header"},ye={class:"logo"},Ve={class:"step-content"},xe={class:"password-strength"},Pe={class:"strength-bar"},ke={class:"strength-text"},ze={class:"step-content"},Ue={class:"step-content complete-step"},he={class:"complete-icon"},qe={class:"step-actions"},Te={class:"step-content"},Ce={class:"step-content"},De={class:"step-content complete-step"},Ne={class:"complete-icon"},Re={class:"step-actions"},Se={class:"register-footer"},Fe={__name:"Register",setup($e){const ee=pe(),C=x(!1),R=x("personal"),b=x(0),w=x(0),V=x(!1),B=x(null),E=x(null),n=H({username:"",password:"",confirmPassword:"",name:"",phone:"",email:"",careerDirection:"",experience:""}),r=H({username:"",password:"",confirmPassword:"",companyName:"",companyType:"",contactPerson:"",contactPhone:"",email:"",address:""}),S=$(()=>{const i=n.password||r.password;if(!i)return"";let l=0;return i.length>=6&&l++,i.length>=10&&l++,/[a-z]/.test(i)&&/[A-Z]/.test(i)&&l++,/\d/.test(i)&&l++,/[!@#$%^&*]/.test(i)&&l++,l<=2?"weak":l<=3?"medium":"strong"}),le=$(()=>({weak:"33%",medium:"66%",strong:"100%"})[S.value]||"0%"),ae=$(()=>({weak:"弱",medium:"中",strong:"强"})[S.value]||""),j=(i,l,o)=>{const c=R.value==="personal"?n:r;l!==c.password?o(new Error("两次输入密码不一致")):o()},se={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:6,max:20,message:"用户名长度在 6 到 20 个字符",trigger:"blur"},{pattern:/^[a-zA-Z0-9_]+$/,message:"用户名只能包含字母、数字和下划线",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度不能少于 6 个字符",trigger:"blur"}],confirmPassword:[{required:!0,message:"请确认密码",trigger:"blur"},{validator:j,trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:"blur"}],name:[{required:!0,message:"请输入真实姓名",trigger:"blur"}],phone:[{required:!0,message:"请输入手机号",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号",trigger:"blur"}],careerDirection:[{required:!0,message:"请选择职业方向",trigger:"change"}]},te={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:6,max:20,message:"用户名长度在 6 到 20 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度不能少于 6 个字符",trigger:"blur"}],confirmPassword:[{required:!0,message:"请确认密码",trigger:"blur"},{validator:j,trigger:"blur"}],email:[{required:!0,message:"请输入企业邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:"blur"}],companyName:[{required:!0,message:"请输入企业名称",trigger:"blur"}],companyType:[{required:!0,message:"请选择企业类型",trigger:"change"}],contactPerson:[{required:!0,message:"请输入联系人姓名",trigger:"blur"}],contactPhone:[{required:!0,message:"请输入联系电话",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号",trigger:"blur"}]},re=async()=>{const i=b.value===0?["username","password","confirmPassword","email"]:["name","phone","careerDirection"];try{await B.value.validateField(i),b.value++}catch{y.warning("请完善当前步骤的信息")}},oe=async()=>{const i=w.value===0?["username","password","confirmPassword","email"]:["companyName","companyType","contactPerson","contactPhone"];try{await E.value.validateField(i),w.value++}catch{y.warning("请完善当前步骤的信息")}},Z=async i=>{if(!V.value){y.warning("请先同意用户服务协议和隐私政策");return}C.value=!0;const l=i==="personal"?n:r;try{const o={username:l.username,password:l.password,email:l.email};let c="";i==="personal"?(c="/auth/register/personal",Object.assign(o,{name:l.name,phone:l.phone,careerDirection:l.careerDirection,experience:l.experience})):(c="/auth/register/enterprise",Object.assign(o,{companyName:l.companyName,companyType:l.companyType,contactPerson:l.contactPerson,contactPhone:l.contactPhone,address:l.address}));const k=await _e.post(c,o);k.code===200||k.data?(y.success(i==="personal"?"注册成功！请登录":"注册成功！待审核后可登录"),setTimeout(()=>ee.push("/login"),1500)):y.error(k.message||"注册失败")}catch(o){y.error(o.message||"注册失败，请稍后重试")}finally{C.value=!1}},A=()=>y.info("用户服务协议"),I=()=>y.info("隐私政策");return(i,l)=>{const o=g("el-icon"),c=g("el-step"),k=g("el-steps"),f=g("el-input"),u=g("el-form-item"),p=g("el-option"),F=g("el-select"),v=g("el-descriptions-item"),M=g("el-descriptions"),O=g("el-checkbox"),z=g("el-button"),W=g("el-form"),G=g("el-tab-pane"),ne=g("el-alert"),de=g("el-tabs"),ie=g("router-link");return P(),me("div",ve,[l[42]||(l[42]=t("div",{class:"register-bg"},[t("div",{class:"bg-shape shape-1"}),t("div",{class:"bg-shape shape-2"}),t("div",{class:"bg-shape shape-3"})],-1)),t("div",be,[t("div",we,[t("div",ye,[e(o,{size:40},{default:a(()=>[e(m(K))]),_:1})]),l[24]||(l[24]=t("h1",null,"服装行业人才认证平台",-1)),l[25]||(l[25]=t("p",null,"创建账号，开启职业新旅程",-1))]),e(de,{modelValue:R.value,"onUpdate:modelValue":l[23]||(l[23]=s=>R.value=s),class:"register-tabs"},{default:a(()=>[e(G,{label:"个人注册",name:"personal"},{default:a(()=>[e(W,{ref_key:"personalFormRef",ref:B,model:n,rules:se,"label-position":"top"},{default:a(()=>[e(k,{active:b.value,simple:"",class:"register-steps"},{default:a(()=>[e(c,{title:"账号信息"}),e(c,{title:"个人信息"}),e(c,{title:"完成注册"})]),_:1},8,["active"]),U(t("div",Ve,[e(u,{label:"用户名",prop:"username"},{default:a(()=>[e(f,{modelValue:n.username,"onUpdate:modelValue":l[0]||(l[0]=s=>n.username=s),placeholder:"6-20位字母、数字或下划线",size:"large"},{prefix:a(()=>[e(o,null,{default:a(()=>[e(m(Q))]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(u,{label:"密码",prop:"password"},{default:a(()=>[e(f,{modelValue:n.password,"onUpdate:modelValue":l[1]||(l[1]=s=>n.password=s),type:"password",placeholder:"至少6位，包含字母和数字",size:"large","show-password":""},{prefix:a(()=>[e(o,null,{default:a(()=>[e(m(N))]),_:1})]),_:1},8,["modelValue"]),t("div",xe,[l[26]||(l[26]=t("span",null,"密码强度：",-1)),t("div",Pe,[t("div",{class:ge(["strength-level",S.value]),style:fe({width:le.value})},null,6)]),t("span",ke,_(ae.value),1)])]),_:1}),e(u,{label:"确认密码",prop:"confirmPassword"},{default:a(()=>[e(f,{modelValue:n.confirmPassword,"onUpdate:modelValue":l[2]||(l[2]=s=>n.confirmPassword=s),type:"password",placeholder:"请再次输入密码",size:"large","show-password":""},{prefix:a(()=>[e(o,null,{default:a(()=>[e(m(N))]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(u,{label:"邮箱",prop:"email"},{default:a(()=>[e(f,{modelValue:n.email,"onUpdate:modelValue":l[3]||(l[3]=s=>n.email=s),placeholder:"用于接收验证邮件和找回密码",size:"large"},{prefix:a(()=>[e(o,null,{default:a(()=>[e(m(X))]),_:1})]),_:1},8,["modelValue"])]),_:1})],512),[[h,b.value===0]]),U(t("div",ze,[e(u,{label:"真实姓名",prop:"name"},{default:a(()=>[e(f,{modelValue:n.name,"onUpdate:modelValue":l[4]||(l[4]=s=>n.name=s),placeholder:"请输入真实姓名",size:"large"},{prefix:a(()=>[e(o,null,{default:a(()=>[e(m(Y))]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(u,{label:"手机号码",prop:"phone"},{default:a(()=>[e(f,{modelValue:n.phone,"onUpdate:modelValue":l[5]||(l[5]=s=>n.phone=s),placeholder:"请输入手机号码",size:"large"},{prefix:a(()=>[e(o,null,{default:a(()=>[e(m(J))]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(u,{label:"职业方向",prop:"careerDirection"},{default:a(()=>[e(F,{modelValue:n.careerDirection,"onUpdate:modelValue":l[6]||(l[6]=s=>n.careerDirection=s),placeholder:"请选择您的职业方向",size:"large",style:{width:"100%"}},{default:a(()=>[e(p,{label:"服装设计师",value:"服装设计师"}),e(p,{label:"服装打版师",value:"服装打版师"}),e(p,{label:"服装质检员",value:"服装质检员"}),e(p,{label:"服装导购",value:"服装导购"}),e(p,{label:"生产管理",value:"生产管理"}),e(p,{label:"时装买手",value:"时装买手"}),e(p,{label:"其他",value:"其他"})]),_:1},8,["modelValue"])]),_:1}),e(u,{label:"工作经验"},{default:a(()=>[e(F,{modelValue:n.experience,"onUpdate:modelValue":l[7]||(l[7]=s=>n.experience=s),placeholder:"请选择工作经验",size:"large",style:{width:"100%"}},{default:a(()=>[e(p,{label:"应届毕业生",value:"应届毕业生"}),e(p,{label:"1-3年",value:"1-3年"}),e(p,{label:"3-5年",value:"3-5年"}),e(p,{label:"5-10年",value:"5-10年"}),e(p,{label:"10年以上",value:"10年以上"})]),_:1},8,["modelValue"])]),_:1})],512),[[h,b.value===1]]),U(t("div",Ue,[t("div",he,[e(o,{size:80,color:"#67c23a"},{default:a(()=>[e(m(L))]),_:1})]),l[29]||(l[29]=t("h3",null,"信息确认",-1)),e(M,{column:1,border:""},{default:a(()=>[e(v,{label:"用户名"},{default:a(()=>[d(_(n.username),1)]),_:1}),e(v,{label:"邮箱"},{default:a(()=>[d(_(n.email),1)]),_:1}),e(v,{label:"姓名"},{default:a(()=>[d(_(n.name),1)]),_:1}),e(v,{label:"手机号"},{default:a(()=>[d(_(n.phone),1)]),_:1}),e(v,{label:"职业方向"},{default:a(()=>[d(_(n.careerDirection),1)]),_:1})]),_:1}),e(O,{modelValue:V.value,"onUpdate:modelValue":l[8]||(l[8]=s=>V.value=s),class:"terms-checkbox"},{default:a(()=>[l[27]||(l[27]=d(" 我已阅读并同意 ",-1)),t("a",{href:"#",onClick:D(A,["prevent"])},"《用户服务协议》"),l[28]||(l[28]=d(" 和 ",-1)),t("a",{href:"#",onClick:D(I,["prevent"])},"《隐私政策》")]),_:1},8,["modelValue"])],512),[[h,b.value===2]]),t("div",qe,[b.value>0?(P(),q(z,{key:0,onClick:l[9]||(l[9]=s=>b.value--),size:"large"},{default:a(()=>[...l[30]||(l[30]=[d("上一步",-1)])]),_:1})):T("",!0),b.value<2?(P(),q(z,{key:1,type:"primary",onClick:re,size:"large"},{default:a(()=>[...l[31]||(l[31]=[d("下一步",-1)])]),_:1})):T("",!0),b.value===2?(P(),q(z,{key:2,type:"primary",onClick:l[10]||(l[10]=s=>Z("personal")),size:"large",loading:C.value,disabled:!V.value},{default:a(()=>[...l[32]||(l[32]=[d(" 完成注册 ",-1)])]),_:1},8,["loading","disabled"])):T("",!0)])]),_:1},8,["model"])]),_:1}),e(G,{label:"企业注册",name:"enterprise"},{default:a(()=>[e(W,{ref_key:"enterpriseFormRef",ref:E,model:r,rules:te,"label-position":"top"},{default:a(()=>[e(k,{active:w.value,simple:"",class:"register-steps"},{default:a(()=>[e(c,{title:"账号信息"}),e(c,{title:"企业信息"}),e(c,{title:"完成注册"})]),_:1},8,["active"]),U(t("div",Te,[e(u,{label:"用户名",prop:"username"},{default:a(()=>[e(f,{modelValue:r.username,"onUpdate:modelValue":l[11]||(l[11]=s=>r.username=s),placeholder:"6-20位字母、数字或下划线",size:"large"},{prefix:a(()=>[e(o,null,{default:a(()=>[e(m(Q))]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(u,{label:"密码",prop:"password"},{default:a(()=>[e(f,{modelValue:r.password,"onUpdate:modelValue":l[12]||(l[12]=s=>r.password=s),type:"password",placeholder:"至少6位，包含字母和数字",size:"large","show-password":""},{prefix:a(()=>[e(o,null,{default:a(()=>[e(m(N))]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(u,{label:"确认密码",prop:"confirmPassword"},{default:a(()=>[e(f,{modelValue:r.confirmPassword,"onUpdate:modelValue":l[13]||(l[13]=s=>r.confirmPassword=s),type:"password",placeholder:"请再次输入密码",size:"large","show-password":""},{prefix:a(()=>[e(o,null,{default:a(()=>[e(m(N))]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(u,{label:"企业邮箱",prop:"email"},{default:a(()=>[e(f,{modelValue:r.email,"onUpdate:modelValue":l[14]||(l[14]=s=>r.email=s),placeholder:"请使用企业邮箱注册",size:"large"},{prefix:a(()=>[e(o,null,{default:a(()=>[e(m(X))]),_:1})]),_:1},8,["modelValue"])]),_:1})],512),[[h,w.value===0]]),U(t("div",Ce,[e(u,{label:"企业名称",prop:"companyName"},{default:a(()=>[e(f,{modelValue:r.companyName,"onUpdate:modelValue":l[15]||(l[15]=s=>r.companyName=s),placeholder:"请输入企业全称",size:"large"},{prefix:a(()=>[e(o,null,{default:a(()=>[e(m(K))]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(u,{label:"企业类型",prop:"companyType"},{default:a(()=>[e(F,{modelValue:r.companyType,"onUpdate:modelValue":l[16]||(l[16]=s=>r.companyType=s),placeholder:"请选择企业类型",size:"large",style:{width:"100%"}},{default:a(()=>[e(p,{label:"服装生产企业",value:"服装生产企业"}),e(p,{label:"服装品牌公司",value:"服装品牌公司"}),e(p,{label:"服装贸易公司",value:"服装贸易公司"}),e(p,{label:"服装零售企业",value:"服装零售企业"}),e(p,{label:"其他",value:"其他"})]),_:1},8,["modelValue"])]),_:1}),e(u,{label:"联系人",prop:"contactPerson"},{default:a(()=>[e(f,{modelValue:r.contactPerson,"onUpdate:modelValue":l[17]||(l[17]=s=>r.contactPerson=s),placeholder:"请输入联系人姓名",size:"large"},{prefix:a(()=>[e(o,null,{default:a(()=>[e(m(Y))]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(u,{label:"联系电话",prop:"contactPhone"},{default:a(()=>[e(f,{modelValue:r.contactPhone,"onUpdate:modelValue":l[18]||(l[18]=s=>r.contactPhone=s),placeholder:"请输入联系电话",size:"large"},{prefix:a(()=>[e(o,null,{default:a(()=>[e(m(J))]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(u,{label:"企业地址",prop:"address"},{default:a(()=>[e(f,{modelValue:r.address,"onUpdate:modelValue":l[19]||(l[19]=s=>r.address=s),placeholder:"请输入企业地址",size:"large"},{prefix:a(()=>[e(o,null,{default:a(()=>[e(m(ce))]),_:1})]),_:1},8,["modelValue"])]),_:1})],512),[[h,w.value===1]]),U(t("div",De,[t("div",Ne,[e(o,{size:80,color:"#67c23a"},{default:a(()=>[e(m(L))]),_:1})]),l[36]||(l[36]=t("h3",null,"信息确认",-1)),e(M,{column:1,border:""},{default:a(()=>[e(v,{label:"用户名"},{default:a(()=>[d(_(r.username),1)]),_:1}),e(v,{label:"企业邮箱"},{default:a(()=>[d(_(r.email),1)]),_:1}),e(v,{label:"企业名称"},{default:a(()=>[d(_(r.companyName),1)]),_:1}),e(v,{label:"企业类型"},{default:a(()=>[d(_(r.companyType),1)]),_:1}),e(v,{label:"联系人"},{default:a(()=>[d(_(r.contactPerson),1)]),_:1}),e(v,{label:"联系电话"},{default:a(()=>[d(_(r.contactPhone),1)]),_:1})]),_:1}),e(ne,{type:"info",closable:!1,style:{"margin-top":"16px"}},{default:a(()=>[...l[33]||(l[33]=[d(" 企业注册后需要提交资质认证，审核通过后方可使用全部功能 ",-1)])]),_:1}),e(O,{modelValue:V.value,"onUpdate:modelValue":l[20]||(l[20]=s=>V.value=s),class:"terms-checkbox"},{default:a(()=>[l[34]||(l[34]=d(" 我已阅读并同意 ",-1)),t("a",{href:"#",onClick:D(A,["prevent"])},"《用户服务协议》"),l[35]||(l[35]=d(" 和 ",-1)),t("a",{href:"#",onClick:D(I,["prevent"])},"《隐私政策》")]),_:1},8,["modelValue"])],512),[[h,w.value===2]]),t("div",Re,[w.value>0?(P(),q(z,{key:0,onClick:l[21]||(l[21]=s=>w.value--),size:"large"},{default:a(()=>[...l[37]||(l[37]=[d("上一步",-1)])]),_:1})):T("",!0),w.value<2?(P(),q(z,{key:1,type:"primary",onClick:oe,size:"large"},{default:a(()=>[...l[38]||(l[38]=[d("下一步",-1)])]),_:1})):T("",!0),w.value===2?(P(),q(z,{key:2,type:"primary",onClick:l[22]||(l[22]=s=>Z("enterprise")),size:"large",loading:C.value,disabled:!V.value},{default:a(()=>[...l[39]||(l[39]=[d(" 完成注册 ",-1)])]),_:1},8,["loading","disabled"])):T("",!0)])]),_:1},8,["model"])]),_:1})]),_:1},8,["modelValue"]),t("div",Se,[l[41]||(l[41]=t("span",null,"已有账号？",-1)),e(ie,{to:"/login"},{default:a(()=>[...l[40]||(l[40]=[d("立即登录",-1)])]),_:1})])])])}}},je=ue(Fe,[["__scopeId","data-v-9551540b"]]);export{je as default};
