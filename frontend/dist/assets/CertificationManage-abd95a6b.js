import{_ as U,r as v,z as M,o as L,e as s,f as _,g as P,i as e,w as r,E as y,h as C,n as c,x as N,t as k,H as q}from"./index-a65af770.js";const j={name:"CertificationManage",setup(){const w=v(null),a=v(!1),u=M({username:"",certType:"",status:""}),t=M({certType:"designer",certName:"",certLevel:"1",examFee:0,validityPeriod:3,certStandard:""}),F={certType:[{required:!0,message:"请选择认证类型",trigger:"change"}],certName:[{required:!0,message:"请输入认证名称",trigger:"blur"}],certLevel:[{required:!0,message:"请选择认证等级",trigger:"change"}],examFee:[{required:!0,message:"请输入考试费用",trigger:"blur"},{type:"number",min:0,message:"考试费用必须大于等于0",trigger:"blur"}],validityPeriod:[{required:!0,message:"请输入有效期",trigger:"blur"},{type:"number",min:1,message:"有效期必须大于等于1",trigger:"blur"}],certStandard:[{required:!0,message:"请输入认证标准详情",trigger:"blur"}]},T=v([]),d=v(1),f=v(10),i=v(0),o=[{id:1,username:"张三",certType:"designer",applyTime:"2024-01-15 10:30:00",status:1,reviewer:"管理员",reviewTime:"2024-01-16 14:20:00"},{id:2,username:"李四",certType:"patternmaker",applyTime:"2024-01-16 09:15:00",status:0,reviewer:"",reviewTime:""},{id:3,username:"王五",certType:"inspector",applyTime:"2024-01-17 16:45:00",status:1,reviewer:"管理员",reviewTime:"2024-01-18 10:20:00"},{id:4,username:"赵六",certType:"sales",applyTime:"2024-01-18 13:10:00",status:2,reviewer:"管理员",reviewTime:"2024-01-19 09:30:00"},{id:5,username:"孙七",certType:"designer",applyTime:"2024-01-19 11:20:00",status:0,reviewer:"",reviewTime:""},{id:6,username:"周八",certType:"patternmaker",applyTime:"2024-01-20 15:30:00",status:1,reviewer:"管理员",reviewTime:"2024-01-21 14:45:00"},{id:7,username:"吴九",certType:"inspector",applyTime:"2024-01-21 08:45:00",status:2,reviewer:"管理员",reviewTime:"2024-01-22 10:15:00"},{id:8,username:"郑十",certType:"designer",applyTime:"2024-01-22 13:10:00",status:0,reviewer:"",reviewTime:""}];L(()=>{m()});const m=()=>{T.value=o,i.value=o.length};return{certStandardFormRef:w,createCertStandardDialogVisible:a,searchForm:u,certStandardForm:t,certStandardRules:F,certifications:T,currentPage:d,pageSize:f,totalCertifications:i,getCertTypeText:n=>({designer:"设计师",patternmaker:"打版师",inspector:"质检员",sales:"导购"})[n]||"未知",getCertTypeTagType:n=>({designer:"info",patternmaker:"success",inspector:"warning",sales:"primary"})[n]||"info",getStatusText:n=>({0:"待审核",1:"审核通过",2:"审核拒绝"})[n]||"未知",getStatusTagType:n=>({0:"warning",1:"success",2:"danger"})[n]||"info",openCreateCertStandardDialog:()=>{t.certType="designer",t.certName="",t.certLevel="1",t.examFee=0,t.validityPeriod=3,t.certStandard="",a.value=!0},createCertStandard:()=>{w.value.validate(n=>{if(n)y.success("认证标准创建成功"),a.value=!1;else return!1})},searchCertifications:()=>{let n=[...o];u.username&&(n=n.filter(g=>g.username.includes(u.username))),u.certType&&(n=n.filter(g=>g.certType===u.certType)),u.status&&(n=n.filter(g=>g.status===parseInt(u.status))),T.value=n,i.value=n.length,d.value=1},resetSearch:()=>{u.username="",u.certType="",u.status="",m()},viewCertDetails:n=>{y.info("查看认证详情功能开发中")},approveCert:n=>{n.status=1,n.reviewer="管理员",n.reviewTime=new Date().toLocaleString(),y.success("认证审核通过"),m()},rejectCert:n=>{n.status=2,n.reviewer="管理员",n.reviewTime=new Date().toLocaleString(),y.success("认证审核拒绝"),m()},viewCertificate:n=>{y.info("查看证书功能开发中")},handleSizeChange:n=>{f.value=n,m()},handleCurrentChange:n=>{d.value=n,m()}}}},B={class:"certification-manage-container"},R={class:"card-header"},E={class:"certification-filters"},I={class:"pagination-container"},H={class:"dialog-footer"};function A(w,a,u,t,F,T){const d=s("el-button"),f=s("el-input"),i=s("el-form-item"),o=s("el-option"),m=s("el-select"),S=s("el-form"),p=s("el-table-column"),V=s("el-tag"),h=s("el-table"),x=s("el-pagination"),z=s("el-card"),D=s("el-dialog");return _(),P("div",B,[e(z,{shadow:"hover"},{header:r(()=>[C("div",R,[a[12]||(a[12]=C("h2",null,"认证管理",-1)),e(d,{type:"primary",onClick:t.openCreateCertStandardDialog},{default:r(()=>[...a[11]||(a[11]=[c("创建认证标准",-1)])]),_:1},8,["onClick"])])]),default:r(()=>[C("div",E,[e(S,{inline:!0,model:t.searchForm,"label-width":"80px"},{default:r(()=>[e(i,{label:"申请人"},{default:r(()=>[e(f,{modelValue:t.searchForm.username,"onUpdate:modelValue":a[0]||(a[0]=l=>t.searchForm.username=l),placeholder:"请输入申请人姓名"},null,8,["modelValue"])]),_:1}),e(i,{label:"认证类型"},{default:r(()=>[e(m,{modelValue:t.searchForm.certType,"onUpdate:modelValue":a[1]||(a[1]=l=>t.searchForm.certType=l),placeholder:"请选择认证类型"},{default:r(()=>[e(o,{label:"全部",value:""}),e(o,{label:"设计师",value:"designer"}),e(o,{label:"打版师",value:"patternmaker"}),e(o,{label:"质检员",value:"inspector"}),e(o,{label:"导购",value:"sales"})]),_:1},8,["modelValue"])]),_:1}),e(i,{label:"认证状态"},{default:r(()=>[e(m,{modelValue:t.searchForm.status,"onUpdate:modelValue":a[2]||(a[2]=l=>t.searchForm.status=l),placeholder:"请选择状态"},{default:r(()=>[e(o,{label:"全部",value:""}),e(o,{label:"待审核",value:"0"}),e(o,{label:"审核通过",value:"1"}),e(o,{label:"审核拒绝",value:"2"})]),_:1},8,["modelValue"])]),_:1}),e(i,null,{default:r(()=>[e(d,{type:"primary",onClick:t.searchCertifications},{default:r(()=>[...a[13]||(a[13]=[c("查询",-1)])]),_:1},8,["onClick"]),e(d,{onClick:t.resetSearch},{default:r(()=>[...a[14]||(a[14]=[c("重置",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),e(h,{data:t.certifications,style:{width:"100%"}},{default:r(()=>[e(p,{prop:"id",label:"认证ID",width:"100"}),e(p,{prop:"username",label:"申请人"}),e(p,{prop:"certType",label:"认证类型",width:"120"},{default:r(l=>[e(V,{type:t.getCertTypeTagType(l.row.certType)},{default:r(()=>[c(N(t.getCertTypeText(l.row.certType)),1)]),_:2},1032,["type"])]),_:1}),e(p,{prop:"applyTime",label:"申请时间",width:"180"}),e(p,{prop:"status",label:"状态",width:"120"},{default:r(l=>[e(V,{type:t.getStatusTagType(l.row.status)},{default:r(()=>[c(N(t.getStatusText(l.row.status)),1)]),_:2},1032,["type"])]),_:1}),e(p,{prop:"reviewer",label:"审核人",width:"120"}),e(p,{prop:"reviewTime",label:"审核时间",width:"180"}),e(p,{label:"操作",width:"200",fixed:"right"},{default:r(l=>[e(d,{type:"primary",size:"small",onClick:b=>t.viewCertDetails(l.row)},{default:r(()=>[...a[15]||(a[15]=[c("查看详情",-1)])]),_:1},8,["onClick"]),l.row.status===0?(_(),k(d,{key:0,type:"success",size:"small",onClick:b=>t.approveCert(l.row)},{default:r(()=>[...a[16]||(a[16]=[c("通过",-1)])]),_:1},8,["onClick"])):q("",!0),l.row.status===0?(_(),k(d,{key:1,type:"danger",size:"small",onClick:b=>t.rejectCert(l.row)},{default:r(()=>[...a[17]||(a[17]=[c("拒绝",-1)])]),_:1},8,["onClick"])):(_(),k(d,{key:2,type:"warning",size:"small",onClick:b=>t.viewCertificate(l.row)},{default:r(()=>[...a[18]||(a[18]=[c("查看证书",-1)])]),_:1},8,["onClick"]))]),_:1})]),_:1},8,["data"]),C("div",I,[e(x,{onSizeChange:t.handleSizeChange,onCurrentChange:t.handleCurrentChange,"current-page":t.currentPage,"page-sizes":[10,20,50,100],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.totalCertifications},null,8,["onSizeChange","onCurrentChange","current-page","page-size","total"])])]),_:1}),e(D,{modelValue:t.createCertStandardDialogVisible,"onUpdate:modelValue":a[10]||(a[10]=l=>t.createCertStandardDialogVisible=l),title:"创建认证标准",width:"600px"},{footer:r(()=>[C("span",H,[e(d,{onClick:a[9]||(a[9]=l=>t.createCertStandardDialogVisible=!1)},{default:r(()=>[...a[19]||(a[19]=[c("取消",-1)])]),_:1}),e(d,{type:"primary",onClick:t.createCertStandard},{default:r(()=>[...a[20]||(a[20]=[c("确定",-1)])]),_:1},8,["onClick"])])]),default:r(()=>[e(S,{ref:"certStandardFormRef",model:t.certStandardForm,rules:t.certStandardRules,"label-width":"120px"},{default:r(()=>[e(i,{label:"认证类型",prop:"certType"},{default:r(()=>[e(m,{modelValue:t.certStandardForm.certType,"onUpdate:modelValue":a[3]||(a[3]=l=>t.certStandardForm.certType=l),placeholder:"请选择认证类型"},{default:r(()=>[e(o,{label:"设计师",value:"designer"}),e(o,{label:"打版师",value:"patternmaker"}),e(o,{label:"质检员",value:"inspector"}),e(o,{label:"导购",value:"sales"})]),_:1},8,["modelValue"])]),_:1}),e(i,{label:"认证名称",prop:"certName"},{default:r(()=>[e(f,{modelValue:t.certStandardForm.certName,"onUpdate:modelValue":a[4]||(a[4]=l=>t.certStandardForm.certName=l),placeholder:"请输入认证名称"},null,8,["modelValue"])]),_:1}),e(i,{label:"认证等级",prop:"certLevel"},{default:r(()=>[e(m,{modelValue:t.certStandardForm.certLevel,"onUpdate:modelValue":a[5]||(a[5]=l=>t.certStandardForm.certLevel=l),placeholder:"请选择认证等级"},{default:r(()=>[e(o,{label:"初级",value:"1"}),e(o,{label:"中级",value:"2"}),e(o,{label:"高级",value:"3"}),e(o,{label:"专家级",value:"4"})]),_:1},8,["modelValue"])]),_:1}),e(i,{label:"考试费用",prop:"examFee"},{default:r(()=>[e(f,{modelValue:t.certStandardForm.examFee,"onUpdate:modelValue":a[6]||(a[6]=l=>t.certStandardForm.examFee=l),type:"number",placeholder:"请输入考试费用"},null,8,["modelValue"])]),_:1}),e(i,{label:"有效期(年)",prop:"validityPeriod"},{default:r(()=>[e(f,{modelValue:t.certStandardForm.validityPeriod,"onUpdate:modelValue":a[7]||(a[7]=l=>t.certStandardForm.validityPeriod=l),type:"number",placeholder:"请输入有效期"},null,8,["modelValue"])]),_:1}),e(i,{label:"认证标准",prop:"certStandard"},{default:r(()=>[e(f,{modelValue:t.certStandardForm.certStandard,"onUpdate:modelValue":a[8]||(a[8]=l=>t.certStandardForm.certStandard=l),type:"textarea",rows:5,placeholder:"请输入认证标准详情"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])])}const X=U(j,[["render",A],["__scopeId","data-v-9dbb5cba"]]);export{X as default};
