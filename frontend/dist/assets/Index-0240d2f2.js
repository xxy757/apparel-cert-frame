import{_ as B,e as C,W as M,f as k,g as E,a1 as T,r as D,K as I,o as P,a2 as g,j as r,k as y,n as V,q as n,t as o,w as a,G as d,C as j,D as z,z as O,y as u,I as q,Q as F}from"./index-3d929bd0.js";import{r as R}from"./request-9595d616.js";const U={name:"EnterpriseCenter",components:{ArrowDown:C,OfficeBuilding:M,SwitchButton:k},setup(){const c=E(),t=T(),_=D("/enterprise/job"),e=I({companyName:"",authStatus:0,logo:"",contactPerson:""});P(()=>{_.value=t.path,v()});const v=async()=>{try{const s=await R.get("/auth/current-user");if(s.code===200){const l=s.data;e.companyName=l.companyName||g("2").username||"",e.authStatus=l.authStatus||0,e.logo=l.logo||"",e.contactPerson=l.contactPerson||""}else console.error("获取企业信息失败:",s.message),e.companyName=g("2").username||""}catch(s){console.error("获取企业信息异常:",s),e.companyName=g("2").username||""}},h=s=>({0:"待审核",1:"审核通过",2:"审核拒绝"})[s]||"未知",p=s=>({0:"warning",1:"success",2:"danger"})[s]||"info",m=s=>{s==="profile"?c.push("/enterprise/auth"):s==="logout"&&i()},i=()=>{j("2"),localStorage.removeItem("savedPassword"),localStorage.removeItem("savedUsername"),sessionStorage.clear(),z.success("退出登录成功");const s=O();s==="1"?c.push("/personal/resume"):s==="3"?c.push("/admin/dashboard"):c.push("/login")};return{activeMenu:_,enterprise:e,getAuthStatusText:h,getAuthStatusType:p,handleCommand:m,logout:i}}},G={class:"enterprise-container"},K={class:"enterprise-sidebar"},Q={class:"enterprise-info"},W={class:"logo"},H={class:"enterprise-details"},J={class:"auth-status"},L={class:"enterprise-main"},X={class:"top-header"},Y={class:"header-right"},Z={class:"user-dropdown"},$={class:"username"},ee={class:"enterprise-content"};function te(c,t,_,e,v,h){const p=r("el-avatar"),m=r("el-tag"),i=r("el-menu-item"),s=r("el-menu"),l=r("ArrowDown"),f=r("el-icon"),S=r("OfficeBuilding"),w=r("el-dropdown-item"),x=r("SwitchButton"),N=r("el-dropdown-menu"),b=r("el-dropdown"),A=r("router-view");return y(),V("div",G,[n("div",K,[n("div",Q,[n("div",W,[o(p,{size:"large",src:e.enterprise.logo},{default:a(()=>[u(d(e.enterprise.companyName?e.enterprise.companyName.charAt(0):"E"),1)]),_:1},8,["src"])]),n("div",H,[n("h3",null,d(e.enterprise.companyName||"未登录"),1),t[0]||(t[0]=n("p",{class:"enterprise-type"},"企业用户",-1)),n("p",J,[o(m,{type:e.getAuthStatusType(e.enterprise.authStatus)},{default:a(()=>[u(d(e.getAuthStatusText(e.enterprise.authStatus)),1)]),_:1},8,["type"])])])]),o(s,{"default-active":e.activeMenu,class:"sidebar-menu",router:"","background-color":"#304156","text-color":"#bfcbd9","active-text-color":"#409EFF"},{default:a(()=>[e.enterprise.authStatus!==1?(y(),q(i,{key:0,index:"/enterprise/auth"},{title:a(()=>[...t[1]||(t[1]=[n("span",null,"企业认证",-1)])]),_:1})):F("",!0),o(i,{index:"/enterprise/job"},{title:a(()=>[...t[2]||(t[2]=[n("span",null,"职位管理",-1)])]),_:1}),o(i,{index:"/enterprise/resume"},{title:a(()=>[...t[3]||(t[3]=[n("span",null,"简历管理",-1)])]),_:1}),o(i,{index:"/enterprise/interview"},{title:a(()=>[...t[4]||(t[4]=[n("span",null,"面试管理",-1)])]),_:1}),o(i,{index:"/enterprise/talent"},{title:a(()=>[...t[5]||(t[5]=[n("span",null,"人才搜索",-1)])]),_:1})]),_:1},8,["default-active"])]),n("div",L,[n("div",X,[t[8]||(t[8]=n("div",{class:"header-left"},null,-1)),n("div",Y,[o(b,{trigger:"click",onCommand:e.handleCommand},{dropdown:a(()=>[o(N,null,{default:a(()=>[o(w,{command:"profile"},{default:a(()=>[o(f,null,{default:a(()=>[o(S)]),_:1}),t[6]||(t[6]=u(" 企业信息 ",-1))]),_:1}),o(w,{command:"logout",divided:""},{default:a(()=>[o(f,null,{default:a(()=>[o(x)]),_:1}),t[7]||(t[7]=u(" 退出登录 ",-1))]),_:1})]),_:1})]),default:a(()=>[n("div",Z,[o(p,{size:36,src:e.enterprise.logo},{default:a(()=>[u(d(e.enterprise.companyName?e.enterprise.companyName.charAt(0):"E"),1)]),_:1},8,["src"]),n("span",$,d(e.enterprise.companyName||"企业用户"),1),o(f,null,{default:a(()=>[o(l)]),_:1})])]),_:1},8,["onCommand"])])]),n("div",ee,[o(A)])])])}const se=B(U,[["render",te],["__scopeId","data-v-75349b91"]]);export{se as default};
